System.register(["./frameworks.js","./vendor.js"],(function(){"use strict";var t,e,s,n,o,i,r,a,c,l,d,h,u,p,f;return{setters:[function(u){t=u.g,e=u.d,s=u.q,n=u.a,o=u.ae,i=u.V,r=u.ai,a=u.w,c=u.ag,l=u.j,d=u.c,h=u.v},function(t){u=t.o,p=t.a,f=t.f}],execute:function(){async function m({currentTarget:t}){g(t,".js-sponsors-meet-the-team-search-modal"),g(t,".js-sponsors-featured-work-search-modal")}async function g(e,o){const i=s(e,o);if(!i)return;await a();const r=s(i,".js-sponsors-featured-item-selection-list");if(!r)return;const c=n(r,"input[type=checkbox]"),l=c.filter(t=>t.checked).length,d=parseInt(t(r,"data-featured-items-limit"),10);for(const t of c)t.disabled=l===d&&!t.checked;const h=s(i,".js-sponsors-featured-items-remaining");if(!h)return;const u=d-l;h.textContent=`${u} remaining`,h.classList.toggle("text-red",u<1)}u("click",".js-refresh-featured-accounts",(function({currentTarget:n}){!async function(t){const n=await e(document,t);s(document,".js-featured-accounts").replaceWith(n)}(t(n,"data-url"))})),u("change",".js-waitlist-countries-select",({currentTarget:e})=>{!function(e){const n=e.parentElement,o=s(n,".js-waitlist-country-unsupported-warning"),i=e.selectedOptions[0].closest("optgroup");if(!(i instanceof HTMLOptGroupElement))return;const r=t(e,"data-supported-key");o.hidden=i.label===r}(e)}),u("change",".js-waitlist-fiscal-host-select",({currentTarget:t})=>{var e;e=t,s(document,".js-sponsors-other-fiscal-host-inputs").hidden="other"!==e.selectedOptions[0].value}),u("change",".js-sponsors-required-input-trigger",({currentTarget:t})=>{const e=t;if(""===e.value)return;const s=n(document,".js-sponsors-required-input-target");for(const n of s){const t=n.getAttribute("data-sponsors-trigger-values");t&&(n.required=t.includes(e.value))}}),p(".js-loading-stripe-account-details",{add(e){!async function(t){const e=await i(t),n=r(document,await e.text());s(document,".js-stripe-onboarding-container").replaceWith(n)}(t(e,"data-url"))}}),u("change",".js-sponsors-dashboard-profile-form",m),u("reset",".js-sponsors-dashboard-profile-form",m),p(".js-sponsors-sortable-list",(function(t){o.create(t,{animation:150,item:".js-sponsors-sortable-item",handle:".js-sponsors-sortable-item-handle",chosenClass:"is-dragging"})}));const j=Math.random,w=Math.cos,y=Math.sin,b=Math.PI,v=2*b;let x,L;const T=[],k=["#6a737d","#0366d6","#28a745","#ffd33d","#f66a0a","#6f42c1","#ea4aaa"];function E(){const t=Math.floor(Math.random()*k.length);return k[t]}const $=document.createElement("div");function M(t){this.frame=0,this.outer=document.createElement("div"),this.inner=document.createElement("div"),this.outer.appendChild(this.inner);const e=this.outer.style,s=this.inner.style;e.position="absolute",e.width=`${3+9*j()}px`,e.height=`${3+9*j()}px`,s.width="100%",s.height="100%",s.backgroundColor=t(),e.perspective="50px",e.transform=`rotate(${360*j()}deg)`,this.theta=360*j(),this.axis=`rotate3D(${w(360*j())},${w(360*j())},0,`,s.transform=`${this.axis}${this.theta}deg)`,this.dTheta=.4+(.7-.4)*j(),this.x=window.innerWidth*j(),this.y=-100,this.dx=y(.2*j()-.1),this.dy=.13+.18*j(),e.left=`${this.x}px`,e.top=`${this.y}px`,this.splineX=function(){const t=[.1,.9];let e=.8;const s=[0,1];for(;e;){let n,o,i,r,a,c=e*j();for(n=0,o=t.length,e=0;n<o;n+=2){if(r=t[n],a=t[n+1],i=a-r,c<e+i){const t=c+r-e;s.push(t),c=t;break}e+=i}const l=c-.1,d=c+.1;for(n=t.length-1;n>0;n-=2)o=n-1,r=t[o],a=t[n],r>=l&&r<d?a>d?t[o]=d:t.splice(o,2):r<l&&a>l&&(a<=d?t[n]=l:t.splice(n,0,l,d));for(n=0,o=t.length,e=0;n<o;n+=2)e+=t[n+1]-t[n]}return s.sort()}(),this.splineY=[];const n=this.splineX.length-1;for(let o=1;o<n;++o)this.splineY[o]=100*j();this.splineY[0]=this.splineY[n]=100*j(),this.update=function(t,n){this.frame+=n,this.x+=this.dx*n,this.y+=this.dy*n,this.theta+=this.dTheta*n;let o=this.frame%7777/7777,i=0,r=1;for(;o>=this.splineX[r];)i=r++;const a=(c=this.splineY[i],l=this.splineY[r],d=(o-this.splineX[i])/(this.splineX[r]-this.splineX[i]),(1-w(b*d))/2*(l-c)+c);var c,l,d;return o*=v,s.transform=`${this.axis}${this.theta}deg)`,e.left=`${this.x+a*w(o)}px`,e.top=`${this.y+a*y(o)}px`,this.y>t+100}}function S(e,n){const o=s(document,".js-sponsorship-billing-details"),i=new URL(t(o,"src"),window.location.origin),r=new URLSearchParams(i.search),a=r.get("return_to")||"",c=new URL(a,window.location.origin);let l=new URLSearchParams(window.location.search).get("tier_id");if(!l){l=new URLSearchParams(c.search).get("tier_id")}let d=new URLSearchParams(window.location.search).get("editing")||"";if(!d){d=new URLSearchParams(c.search).get("editing")||""}const h=new URLSearchParams;h.set("privacy_level",e),h.set("email_opt_in",n),h.set("tier_id",l||""),h.set("editing",d||"");const u=`${c.pathname}?${h.toString()}`,p=encodeURIComponent(u);r.set("return_to",c.toString()),o.setAttribute("src",`${i.pathname}?return_to=${p}`)}$.style.position="fixed",$.style.top="0",$.style.left="0",$.style.width="100%",$.style.height="0",$.style.overflow="visible",$.style.zIndex="9999",u("change",".js-sponsorship-privacy-level",(function(t){const e=t.target.value,n=s(document,".js-sponsorship-email-opt-in",HTMLInputElement).checked?"on":"off",o=s(document,".js-sponsorship-submit",HTMLButtonElement);o.disabled=!1,o.classList.remove("tooltipped","tooltipped-s","tooltipped-no-delay"),S(e,n)})),u("change",".js-sponsorship-email-opt-in",(function(t){const e=t.target.checked?"on":"off",o=n(document,".js-sponsorship-privacy-level",HTMLInputElement).find(t=>t.checked),i=o?o.value:"PUBLIC",r=s(document,".js-sponsorship-submit",HTMLButtonElement);r.disabled=!1,r.classList.remove("tooltipped","tooltipped-s","tooltipped-no-delay"),S(i,e)})),p(".js-show-confetti-party",(function(t){!function(t){const e=null==t?5e3:t;if(!L){document.body.appendChild($);const t=()=>{const e=new M(E);T.push(e),$.appendChild(e.outer),x=window.setTimeout(t,40*j())};let s;t();const n=t=>{const e=s?t-s:0;s=t;const o=window.innerHeight;for(let s=T.length-1;s>=0;--s)T[s].update(o,e)&&($.removeChild(T[s].outer),T.splice(s,1));x||T.length?L=requestAnimationFrame(n):(document.body.removeChild($),L=void 0)};window.setTimeout((function(){clearTimeout(x),x=void 0}),e),requestAnimationFrame(n)}}();const e=t.getAttribute("data-dismiss-url");if(e){const n=s(t,".js-data-dismiss-url-csrf",HTMLInputElement),o=c(e,n.value,{method:"POST"});l(o)}})),p(".js-tier-shared-parent auto-check.js-tier-pricing-check",t=>{const e=d(t,".js-tier-shared-parent"),n=s(e,".js-publish-tier-button",HTMLButtonElement);t.addEventListener("error",()=>n.disabled=!0),t.addEventListener("load",()=>n.disabled=!1),f(s(t,"input",HTMLInputElement),"input")}),u("click",".js-sponsors-tier-nudge-toggle",(function(){const t=n(document,".js-sponsors-tier-nudge");for(const e of t)e.toggleAttribute("hidden")})),u("change",'.js-sponsors-newsletter-tiers input[type="checkbox"]',(function(t){const e=d(t.currentTarget,".js-sponsors-newsletter-tiers"),n=s(e,".js-sponsors-newsletter-tiers-default"),o=s(e,".js-sponsors-newsletter-tiers-count"),i="0"===s(e,"[data-check-all-count]").textContent;n.hidden=!i,o.hidden=i})),p(".js-fetch-stripe-details",{add(s){!async function(t,s){const n=await e(document,s);t.replaceWith(n)}(s,t(s,"data-url"))}}),p(".js-validate-at-least-one-checkbox-checked",(function(t){const e=t.getAttribute("data-none-checked-error-message"),s=t.querySelector(".js-survey-checkbox");s.required=!0,s.addEventListener("invalid",(function(){s.setCustomValidity(e)})),t.addEventListener("change",(function(){s.required=!1;const n=t.querySelector(".js-survey-checkbox:checked");s.setCustomValidity(n?"":e)}))})),u("details-menu-selected",".js-sponsors-social-sharing",(function(t){const e=t.detail.relatedTarget.getAttribute("data-social-platform"),s=t.currentTarget.querySelectorAll(".js-sponsors-social-sharing-button");for(const n of s)n.hidden=n.getAttribute("data-social-platform")!==e}),{capture:!0}),p(".js-sponsors-social-sharing-body",{add(t){if(!(t instanceof HTMLTextAreaElement))throw new Error("invariant: app/assets/modules/github/sponsorships/social-sharing.ts:15");const e=s(document,".js-sponsors-social-sharing-button[data-social-platform=twitter]",HTMLAnchorElement),n=new URLSearchParams(e.search),o=s(document,".js-sponsors-social-sharing-button[data-social-platform=facebook]",HTMLAnchorElement),i=new URLSearchParams(o.search);h("keyup",".js-sponsors-social-sharing-body",()=>{n.set("text",t.value),e.search=n.toString(),i.set("quote",t.value),o.search=i.toString()})}})}}}));
//# sourceMappingURL=sponsors-bootstrap-c76596d2.js.map
