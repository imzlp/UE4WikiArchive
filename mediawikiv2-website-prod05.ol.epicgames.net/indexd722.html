<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&oldid=213 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 01:15:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"93a8bd5691",applicationID:"145396307"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script>
<title>Multi-Threading: Task Graph System - Epic Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Multi-Threading:_Task_Graph_System","wgTitle":"Multi-Threading: Task Graph System","wgCurRevisionId":213,"wgRevisionId":213,"wgArticleId":106,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials","Code","Community Videos","Community Created Content"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Multi-Threading:_Task_Graph_System","wgRelevantArticleId":106,"wgRequestId":"3f47f3f11780cbd6097ec79c","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.pygments":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.options@0bhc5ha",function($,jQuery,require,module){mw.user.options.set([]);});mw.loader.implement("user.tokens@071vexb",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/

});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="load9239.css?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="load2c8d.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<meta name="generator" content="MediaWiki 1.30.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="shortcut icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://mediawikiv2-website-prod05.ol.epicgames.net/opensearch_desc.php" title="Epic Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://mediawikiv2-website-prod05.ol.epicgames.net/api.php?action=rsd"/>
<link rel="license" href="https://www.epicgames.com/tos"/>
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.min.js?40bd4"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Multi-Threading_Task_Graph_System rootpage-Multi-Threading_Task_Graph_System skin-vector action-view"><!DOCTYPE html><html data-baseurl="https://www.unrealengine.com"><head><meta charSet="UTF-8"><meta httpEquiv="X-UA-Compatible" content="IE=9;IE=10;IE=11;IE=Edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"><meta name="host" content="ue-website-node-prod07-i-0fabd7d8c0a1277bf"><meta name="worker" content="134"><link rel="apple-touch-icon" sizes="180x180" href="https://mediawikiv2-website-prod05.ol.epicgames.net/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-16x16.png"><link rel="manifest" href="https://mediawikiv2-website-prod05.ol.epicgames.net/manifest.json"><link rel="mask-icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/safari-pinned-tab.svg" color="#2a2a2a"><meta name="apple-mobile-web-app-title" content="Unreal Engine"><meta name="application-name" content="Unreal Engine"><meta name="msapplication-TileColor" content="#0aaff1"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="theme-color" content="#0aaff1"><title data-react-helmet="true"></title></head><body><div id="epicGamesNavigation"></div><script>(function () {
    var config = {"serverUrl":"https://www.unrealengine.com","locale":"en-US","localeOptions":[{"lang":"en-US","name":"English"},{"lang":"ko","name":"한국어"},{"lang":"ja","name":"日本語"},{"lang":"zh-CN","name":"简体中文"}],"euCookieStrings":{"cookieString":"We use cookies to ensure the best experience on all Epic Games websites. To learn more, please see our {0}.","policyString":"privacy policy","closeString":"Close","policyUrl":"https://www.epicgames.com/privacypolicy"},"_currentVersion":"1.37.2.101.61.0.1","_type":"Epic Games Nav","hideSignIn":true,"_lastModifiedBy":"tony.rossi","epicPropertyName":"unreal_engine","pcDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncherInstaller.msi?productName=unrealengine","_createdBy":"tony.rossi","_uuid":"a0357fbf-1bd5-4eca-bbbf-48ea56e4ddb1","callToAction":{"_type":"Epic Header Call To Action","useCustomCallback":true,"href":"http://unrealengine.com/register","title":"Download"},"hideCallToAction":false,"hideLocale":true,"accountLinks":{"signOutLink":{"_type":"Epic Header Action Link","useCustomCallback":true,"href":"http://unrealengine.com/logout","key":"signout"},"dropdownLinks":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"http://unrealengine.com/account/personal?lang=en-US","title":"Personal","key":"personal"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://publish.unrealengine.com","title":"Seller","key":"seller"}],"signInLinks":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/id/login","title":"Sign In","key":"signin"}],"_type":"Epic Header Account Links"},"logoLink":{"_type":"Epic Header Action Link","useCustomCallback":true,"href":"http://unrealengine.com/","key":"logo"},"_futureVersion":"none","_created":"2017-08-21T08:59:33.648Z","_activeDate":"2019-05-31T08:22:43.049Z","macDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncher.dmg?productName=unrealengine","messages":{"search":"Search","default_download":"Get Epic Games","default_username":"Account","_type":"Epic Header Messages","locale":"English","sign_in":"Sign In","sign_out":"Sign Out"},"links":[{"isBarDivider":false,"_type":"Epic Header Link","useCustomCallback":true,"href":"http://unrealengine.com/blog","title":"News","key":"blog"},{"isBarDivider":false,"_type":"Epic Header Link","useCustomCallback":false,"title":"About","key":"about","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/features","title":"Features"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/release-notes/","title":"What's New"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://trello.com/b/TTAVI7Ny/ue4-roadmap","title":"Roadmap","target":"_blank"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/faq","title":"FAQ"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Industries","key":"industries","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/games","title":"Games"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/architecture-solution","title":"Architecture"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/automotive-transportation","title":"Automotive & Transportation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/broadcast-live-events","title":"Broadcast & Live Events"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/film-television","title":"Film & Television"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/training-simulation","title":"Training & Simulation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/more-uses","title":"More Uses"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Learning & Support","key":"learn","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/learn","title":"Get Started"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://docs.unrealengine.com/","title":"Documentation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/onlinelearning-courses","title":"Online Learning","key":""},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/events/webinar-series","title":"Webinars"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/education","title":"Education"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/support","title":"Support"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://issues.unrealengine.com/","title":"Issues"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Community","key":"community","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://forums.unrealengine.com/","title":"Forums"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://answers.unrealengine.com/","title":"AnswerHub"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/megagrants","title":"MegaGrants","key":""},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://communities.unrealengine.com","title":"User Groups"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/events","title":"Events"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/programs/nvidia-edge","title":"Nvidia Edge","key":"programs"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/programs/intel-unreal","title":"Intel + Unreal","key":""}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Marketplace","key":"marketplace","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"http://unrealengine.com/marketplace","title":"Browse"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://publish.unrealengine.com/","title":"Submit Content"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/marketplace-faq","title":"Marketplace FAQ"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/marketplace-guidelines","title":"Marketplace Guidelines"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://forums.unrealengine.com/forumdisplay.php?56-Marketplace","title":"Marketplace Forums"}]}],"hideSearch":false,"_lastModified":"2020-01-30T21:35:59.869Z","_version":{"_comment":"Publish to server UnrealEngine.com (Production)","_createdBy":"tony.rossi"},"_locale":"en_US","useServerUrl":true,"isEu":false};

    if (typeof window._egNavBeforeConfigSet === 'function') {
        window._egNavBeforeConfigSet();
        window._egNavBeforeConfigSetRun = true;
    }
    window._egNavBeforeConfigSetCalled = true;

    if (typeof window._epicGamesNav === 'undefined') {
        window._epicGamesNav = config;
    } else {
        var missingAssumeFalsey = ['hideLocale', 'hideSearch', 'hideSignIn', 'hideCallToAction'];
        for (var key in config) {
            if (typeof key === 'string') {
                if (!window._epicGamesNav[key] && config[key] !== null && missingAssumeFalsey.indexOf(key) === -1) {
                    window._epicGamesNav[key] = config[key];
                }
            }
        }
    }

    window._epicGamesNav.onSearch = function(query) {
        window.location.href = 'https://www.unrealengine.com' + '/bing-search?keyword=' + query;
    };

    if (typeof window._egNavAfterConfigSet === 'function') {
        window._egNavAfterConfigSet();
        window._egNavAfterConfigSetRun = true;
    }
    window._egNavAfterConfigSetCalled = true;
})();
window.__locale = '';
</script><link key="header-css" rel="stylesheet" href="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/header.epic-unreal-engine.5ace4ab88c6f6357685f.css"><script src="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/header.epic-unreal-engine.5ace4ab88c6f6357685f.js"></script></body>
<!-- Mirrored from mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&oldid=213 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 01:15:50 GMT -->
</html>		<div class="container">
			<div id="mw-navigation">
				<h2>Navigation menu</h2>

				<div id="mw-head">
					<!-- 					<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Multi-Threading%3A+Task+Graph+System&amp;returntoquery=oldid%3D213" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
					 -->
					<div class="homelink_container">
                        <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/" title="UE4 Wiki Home" class="homelink">HOME</a>
                    </div>
                    <div class="notice">
                    	We have temporarily disabled editing while we're working on a new Wiki!
                    </div>
					<div id="left-navigation">
											<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
														<li id="ca-nstab-main" class="selected"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System" title="View the content page [c]" accesskey="c">Page</a></span></li>
							<li id="ca-talk" class="new"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Talk:Multi-Threading:_Task_Graph_System&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										</div>
					<div id="right-navigation">
											<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
														<li id="ca-view" class="selected"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System">Read</a></span></li>
							<li id="ca-viewsource"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
							<li id="ca-history" class="collapsible"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search Epic Wiki" title="Search Epic Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
										</div>
				</div>
				
			</div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>

								<div class="mw-indicators mw-body-content">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Multi-Threading: Task Graph System</h1>
												<div id="bodyContent" class="mw-body-content">
											<div id="siteSub" class="noprint">From Epic Wiki</div>
										
															<div id="jump-to-nav" class="mw-jump">
						Jump to:						<a href="#mw-head">navigation</a>, 						<a href="#p-search">search</a>
					</div>
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Template:Rating&amp;action=edit&amp;redlink=1" class="new" title="Template:Rating (page does not exist)">Template:Rating</a>
</p>
<div id="toc" class="toc"><div class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#My_Example:_Calculate_first_50.2C000_Prime_Numbers"><span class="tocnumber">1.1</span> <span class="toctext">My Example: Calculate first 50,000 Prime Numbers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Video"><span class="tocnumber">2</span> <span class="toctext">Video</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Comparing_Results"><span class="tocnumber">3</span> <span class="toctext">Comparing Results</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Entire_.CPP_Source_Code_For_You.21"><span class="tocnumber">4</span> <span class="toctext">Entire .CPP Source Code For You!</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#ENamedThreads::GameThread.3F"><span class="tocnumber">5</span> <span class="toctext">ENamedThreads::GameThread?</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Why_a_Name_Space.3F"><span class="tocnumber">6</span> <span class="toctext">Why a Name Space?</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Knowing_When_All_Tasks_Are_Complete"><span class="tocnumber">7</span> <span class="toctext">Knowing When All Tasks Are Complete</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Completion_Events_Are_Filled_All_at_Once"><span class="tocnumber">7.1</span> <span class="toctext">Completion Events Are Filled All at Once</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Things_to_Note"><span class="tocnumber">8</span> <span class="toctext">Things to Note</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#AsyncWork_Task_Templates"><span class="tocnumber">9</span> <span class="toctext">AsyncWork Task Templates</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#What_About_Platforms_Without_Multithreading.3F"><span class="tocnumber">10</span> <span class="toctext">What About Platforms Without Multithreading?</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Further_Reading"><span class="tocnumber">11</span> <span class="toctext">Further Reading</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#ParallelFor"><span class="tocnumber">11.1</span> <span class="toctext">ParallelFor</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Conclusion"><span class="tocnumber">12</span> <span class="toctext">Conclusion</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p><i>Author:</i> <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=User:Rama" title="User:Rama">Rama</a> (<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=User_talk:Rama" title="User talk:Rama">talk</a>)
</p><p>Dear Community,
</p><p>The UE4 task graph system allows you to perform many actions, each of which is relatively small, on separate threads from the game thread.
</p><p>Please note that a task graph <b>will sometimes use the game thread,</b> and therefore for large tasks you should use a FRunnable as demonstrated in <a rel="nofollow" class="external text" href="https://wiki.unrealengine.com/Multi-Threading:_How_to_Create_Threads_in_UE4">my other multi threading wiki.</a>
</p><p><b>AsyncWork.h</b>
</p>
<pre>* Tells the user job to do the work, sometimes called synchronously, sometimes from the thread pool. Calls the event tracker.
</pre>
<p><br /> 
</p>
<h3><span class="mw-headline" id="My_Example:_Calculate_first_50.2C000_Prime_Numbers">My Example: Calculate first 50,000 Prime Numbers</span></h3>
<p>In the video below I am calculating the first 50,000 prime numbers while the rest of the game thread continues to run!
</p><p>To put this in perspective, if I did what I do in the video without the UE4 task graph system, the game would be hanging while all those numbers get computed, for the total duration of the video&#160;:)
</p>
<h2><span class="mw-headline" id="Video">Video</span></h2>
<p>&lt;youtube&gt;<a rel="nofollow" class="external free" href="https://www.youtube.com/watch?v=cgELOodtoSU&amp;feature=youtu.be">https://www.youtube.com/watch?v=cgELOodtoSU&amp;feature=youtu.be</a>&lt;/youtube&gt;
</p>
<h2><span class="mw-headline" id="Comparing_Results">Comparing Results</span></h2>
<p>I show my results at the end of the video.
</p><p>You can compare them with this webpage!
</p><p>My multi-threading system did actually calculate the first 50,000 (+1) prime numbers!
</p><p><b><a rel="nofollow" class="external text" href="http://www.cs.arizona.edu/icon/oddsends/primes.htm">|First 50,000 Prime Numbers</a></b>
</p>
<h2><span class="mw-headline" id="Entire_.CPP_Source_Code_For_You.21">Entire .CPP Source Code For You!</span></h2>
<p>I am doing all of this as a test in my player controller class&#160;:)
</p><p>I did just about everything in the .cpp file alone using the Namespace.
</p><p>Please note that the timer that checks when the threads are done is also in the .h, as is the function start the whole process. (see toward the end of the code)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//Multi thread Test, finding prime number</span>
<span class="k">namespace</span> <span class="n">VictoryMultiThreadTest</span>
<span class="p">{</span>
	<span class="c1">//Multi-threaded link to UObjects, do not create,modify,destroy UObjects / AActors via this link!</span>
	<span class="n">AVictoryGamePlayerController</span><span class="o">*</span> <span class="n">ThePC</span><span class="p">;</span>
	
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//   OUTPUT RESULTS OF TASK THREADS</span>
	<span class="n">TArray</span><span class="o">&lt;</span><span class="n">uint32</span><span class="o">&gt;</span> <span class="n">PrimeNumbers</span><span class="p">;</span>
	
	<span class="c1">// This is the array of thread completions to know if all threads are done yet</span>
	<span class="n">FGraphEventArray</span>		<span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">;</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~</span>

	<span class="c1">//~~~~~~~~~~~~~~~</span>
	<span class="c1">//Are All Tasks Complete?</span>
	<span class="c1">//~~~~~~~~~~~~~~~</span>
	<span class="kt">bool</span> <span class="nf">TasksAreComplete</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="c1">//Check all thread completion events</span>
		<span class="k">for</span> <span class="p">(</span><span class="n">int32</span> <span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Index</span> <span class="o">&lt;</span> <span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">.</span><span class="n">Num</span><span class="p">();</span> <span class="n">Index</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="c1">//If  ! IsComplete()</span>
			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">IsComplete</span><span class="p">())</span>
			<span class="p">{</span>
				<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="c1">//~~~~~~~~~~~</span>
	<span class="c1">//Actual Task Code</span>
	<span class="c1">//~~~~~~~~~~~</span>
	<span class="n">int32</span> <span class="nf">FindNextPrimeNumber</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="c1">//Last known prime number  + 1</span>
		<span class="n">int32</span> <span class="n">TestPrime</span> <span class="o">=</span> <span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Last</span><span class="p">();</span>
		
		<span class="kt">bool</span> <span class="n">NumIsPrime</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
		<span class="k">while</span><span class="p">(</span> <span class="o">!</span> <span class="n">NumIsPrime</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">NumIsPrime</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
			
			<span class="c1">//Try Next Number</span>
			<span class="n">TestPrime</span><span class="o">++</span><span class="p">;</span>
			
			<span class="c1">//Modulus from 2 to current number - 1 </span>
			<span class="k">for</span><span class="p">(</span><span class="n">int32</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">TestPrime</span><span class="p">;</span> <span class="n">b</span><span class="o">++</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span><span class="p">(</span><span class="n">TestPrime</span> <span class="o">%</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> 
				<span class="p">{</span>
					<span class="n">NumIsPrime</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
					<span class="k">break</span><span class="p">;</span>
					<span class="c1">//~~~</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
		
		<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
		<span class="c1">//Did another thread find this number already?</span>
		<span class="k">if</span><span class="p">(</span><span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">TestPrime</span><span class="p">))</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="n">FindNextPrimeNumber</span><span class="p">();</span> <span class="c1">//recursion</span>
		<span class="p">}</span>
		<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
		
		<span class="c1">//Success!</span>
		<span class="k">return</span> <span class="n">TestPrime</span><span class="p">;</span>
	<span class="p">}</span>
	

	<span class="c1">//~~~~~~~~~~~</span>
	<span class="c1">//Each Task Thread</span>
	<span class="c1">//~~~~~~~~~~~</span>
	<span class="k">class</span> <span class="nc">FVictoryTestTask</span>
	<span class="p">{</span>
	
	  <span class="k">public</span><span class="o">:</span>
		<span class="n">FVictoryTestTask</span><span class="p">()</span> <span class="c1">//send in property defaults here</span>
		<span class="p">{</span>
			<span class="c1">//can add properties here</span>
		<span class="p">}</span>

		<span class="cm">/** return the name of the task **/</span>
		<span class="k">static</span> <span class="k">const</span> <span class="n">TCHAR</span><span class="o">*</span> <span class="n">GetTaskName</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="n">TEXT</span><span class="p">(</span><span class="s">&quot;FVictoryTestTask&quot;</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="n">FORCEINLINE</span> <span class="k">static</span> <span class="n">TStatId</span> <span class="n">GetStatId</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="n">RETURN_QUICK_DECLARE_CYCLE_STAT</span><span class="p">(</span><span class="n">FVictoryTestTask</span><span class="p">,</span> <span class="n">STATGROUP_TaskGraphTasks</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="cm">/** return the thread for this task **/</span>
		<span class="k">static</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">Type</span> <span class="n">GetDesiredThread</span><span class="p">()</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">AnyThread</span><span class="p">;</span>
		<span class="p">}</span>
		
		
		<span class="cm">/*</span>
<span class="cm">		namespace ESubsequentsMode</span>
<span class="cm">		{</span>
<span class="cm">			enum Type</span>
<span class="cm">			{</span>
<span class="cm">				//Necessary when another task will depend on this task. </span>
<span class="cm">				TrackSubsequents,</span>
<span class="cm">				//Can be used to save task graph overhead when firing off a task that will not be a dependency of other tasks. </span>
<span class="cm">				FireAndForget</span>
<span class="cm">			};</span>
<span class="cm">		}</span>
<span class="cm">		*/</span>
		<span class="k">static</span> <span class="n">ESubsequentsMode</span><span class="o">::</span><span class="n">Type</span> <span class="n">GetSubsequentsMode</span><span class="p">()</span> 
		<span class="p">{</span> 
			<span class="k">return</span> <span class="n">ESubsequentsMode</span><span class="o">::</span><span class="n">TrackSubsequents</span><span class="p">;</span> 
		<span class="p">}</span>
		
                <span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~</span>
                <span class="c1">//Main Function: Do Task!!</span>
                <span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~</span>
		<span class="kt">void</span> <span class="n">DoTask</span><span class="p">(</span><span class="n">ENamedThreads</span><span class="o">::</span><span class="n">Type</span> <span class="n">CurrentThread</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGraphEventRef</span><span class="o">&amp;</span> <span class="n">MyCompletionGraphEvent</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="c1">//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
			
			<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">FindNextPrimeNumber</span><span class="p">());</span>
			
			<span class="c1">//***************************************</span>
			<span class="c1">//Show Incremental Results in Main Game Thread!</span>
			
			<span class="c1">//	Please note you should not create, destroy, or modify UObjects here.</span>
			<span class="c1">//	  Do those sort of things after all thread are completed.</span>
			
			<span class="c1">//	  All calcs for making stuff can be done in the threads</span>
			<span class="c1">//	     But the actual making/modifying of the UObjects should be done in main game thread,</span>
			<span class="c1">//		 which is AFTER all tasks have completed :)</span>
			
			<span class="n">ThePC</span><span class="o">-&gt;</span><span class="n">ClientMessage</span><span class="p">(</span><span class="n">FString</span><span class="p">(</span><span class="s">&quot;A thread completed! ~ &quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Last</span><span class="p">()));</span>
			<span class="c1">//***************************************</span>
		<span class="p">}</span>
	<span class="p">};</span>
	
	<span class="c1">//~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//  Multi-Task Initiation Point </span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~</span>
	<span class="kt">void</span> <span class="nf">FindPrimes</span><span class="p">(</span><span class="k">const</span> <span class="n">uint32</span> <span class="n">TotalToFind</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
		<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
		<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
				
		<span class="c1">//~~~~~~~~~~~~~~~~~~~~</span>
		<span class="c1">//Add thread / task for each of total prime numbers to find</span>
		<span class="c1">//~~~~~~~~~~~~~~~~~~~~</span>
		
		<span class="k">for</span><span class="p">(</span><span class="n">uint32</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">TotalToFind</span><span class="p">;</span> <span class="n">b</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">TGraphTask</span><span class="o">&lt;</span><span class="n">FVictoryTestTask</span><span class="o">&gt;::</span><span class="n">CreateTask</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">GameThread</span><span class="p">).</span><span class="n">ConstructAndDispatchWhenReady</span><span class="p">());</span> <span class="c1">//add properties inside ConstructAndDispatchWhenReady()</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
<span class="p">}</span>
</pre></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//~~~ In the Game Thread ~~~</span>

<span class="c1">//timer to check when threads are done</span>
<span class="c1">//Please note timers must be in the game thread / main / normal thread</span>
<span class="kt">void</span> <span class="n">AVictoryGamePlayerController</span><span class="o">::</span><span class="n">VictoryCheckAllThreadsDone</span><span class="p">()</span>
<span class="p">{</span>
	
	<span class="k">if</span><span class="p">(</span><span class="n">VictoryMultiThreadTest</span><span class="o">::</span><span class="n">TasksAreComplete</span><span class="p">()</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="c1">//Clear Timer</span>
		<span class="n">GetWorldTimerManager</span><span class="p">().</span><span class="n">ClearTimer</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> 
			<span class="o">&amp;</span><span class="n">AVictoryGamePlayerController</span><span class="o">::</span><span class="n">VictoryCheckAllThreadsDone</span><span class="p">);</span>
			
		<span class="n">ClientMessage</span><span class="p">(</span><span class="s">&quot;Multi Thread Test Done!&quot;</span><span class="p">);</span>
		
		<span class="n">VShow</span><span class="p">(</span><span class="s">&quot;Prime Numbers Found:&quot;</span><span class="p">);</span>
		<span class="k">for</span><span class="p">(</span><span class="n">int32</span> <span class="n">v</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="n">VictoryMultiThreadTest</span><span class="o">::</span><span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Num</span><span class="p">();</span> <span class="n">v</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="n">VShow</span><span class="p">(</span><span class="n">FString</span><span class="o">::</span><span class="n">FromInt</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">FString</span><span class="p">(</span><span class="s">&quot;~ &quot;</span><span class="p">),</span> <span class="n">VictoryMultiThreadTest</span><span class="o">::</span><span class="n">PrimeNumbers</span><span class="p">[</span><span class="n">v</span><span class="p">]);</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//Starting the Tasks / Threads</span>
<span class="kt">void</span> <span class="n">AVictoryGamePlayerController</span><span class="o">::</span><span class="n">StartThreadTest</span><span class="p">()</span>
<span class="p">{</span>

	<span class="n">VictoryMultiThreadTest</span><span class="o">::</span><span class="n">ThePC</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
	<span class="n">VictoryMultiThreadTest</span><span class="o">::</span><span class="n">FindPrimes</span><span class="p">(</span><span class="mi">50000</span><span class="p">);</span> <span class="c1">//first 50,000 prime numbers</span>
			
	<span class="c1">//Start a timer to check when all the threads are done!</span>
	<span class="n">GetWorldTimerManager</span><span class="p">().</span><span class="n">SetTimer</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> 
		<span class="o">&amp;</span><span class="n">AVictoryGamePlayerController</span><span class="o">::</span><span class="n">VictoryCheckAllThreadsDone</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>	
<span class="p">}</span>
</pre></div>
<p><br />
</p>
<h2><span class="mw-headline" id="ENamedThreads::GameThread.3F">ENamedThreads::GameThread?</span></h2>
<p>Please note in this line:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span>
  <span class="n">TGraphTask</span><span class="o">&lt;</span><span class="n">FVictoryTestTask</span><span class="o">&gt;::</span><span class="n">CreateTask</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">GameThread</span><span class="p">).</span><span class="n">ConstructAndDispatchWhenReady</span><span class="p">()</span>
<span class="p">);</span>
</pre></div>
<p>GameThread simply signifies where the task is being initiated from, not where it is allowed to run.
</p><p>Unless you have threads starting other threads you will want to always specify GameThread&#160;:)
</p>
<h2><span class="mw-headline" id="Why_a_Name_Space.3F">Why a Name Space?</span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//Multi thread Test, finding prime number</span>
<span class="k">namespace</span> <span class="n">VictoryMultiThreadTest</span>
<span class="p">{</span>
</pre></div>	
<p>It's just a convenient way to organize the required info for multi-threading&#160;:)
</p>
<h2><span class="mw-headline" id="Knowing_When_All_Tasks_Are_Complete">Knowing When All Tasks Are Complete</span></h2>
<p>I use a looping 1 second timer that runs this function:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//Array of all task threads, instantly and entirely filled when FindPrimes is first called</span>
<span class="n">FGraphEventArray</span>		<span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">;</span>

<span class="c1">//~~~~~~~~~~~~~~~</span>
<span class="c1">//Are All Tasks Complete?</span>
<span class="c1">//~~~~~~~~~~~~~~~</span>
<span class="kt">bool</span> <span class="nf">TasksAreComplete</span><span class="p">()</span>
<span class="p">{</span>
	<span class="c1">//Check all thread completion events</span>
	<span class="k">for</span> <span class="p">(</span><span class="n">int32</span> <span class="n">Index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Index</span> <span class="o">&lt;</span> <span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">.</span><span class="n">Num</span><span class="p">();</span> <span class="n">Index</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="c1">//If  ! IsComplete()</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">IsComplete</span><span class="p">())</span>
		<span class="p">{</span>
			<span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<p>the critical line is this
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">[</span><span class="n">Index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">IsComplete</span><span class="p">())</span>
</pre></div>
<p>See TaskGraphInterfaces.h for more info!
</p>
<h3><span class="mw-headline" id="Completion_Events_Are_Filled_All_at_Once">Completion Events Are Filled All at Once</span></h3>
<p>Please note that ALL completion events are created the instant the multi-threading process is initiated!
</p><p>This part is NOT multi-threaded&#160;:)
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="c1">//~~~~~~~~~~~~~~~~~~~</span>
<span class="c1">//  Multi-Task Initiation Point </span>
<span class="c1">//~~~~~~~~~~~~~~~~~~~</span>
<span class="kt">void</span> <span class="nf">FindPrimes</span><span class="p">(</span><span class="k">const</span> <span class="n">uint32</span> <span class="n">TotalToFind</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Empty</span><span class="p">();</span>
	<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
	<span class="n">PrimeNumbers</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
			
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~</span>
	<span class="c1">//Add thread / task for each of total prime numbers to find</span>
	<span class="c1">//~~~~~~~~~~~~~~~~~~~~</span>
	
	<span class="k">for</span><span class="p">(</span><span class="n">uint32</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">TotalToFind</span><span class="p">;</span> <span class="n">b</span><span class="o">++</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">VictoryMultithreadTest_CompletionEvents</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">TGraphTask</span><span class="o">&lt;</span><span class="n">FVictoryTestTask</span><span class="o">&gt;::</span><span class="n">CreateTask</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">GameThread</span><span class="p">).</span><span class="n">ConstructAndDispatchWhenReady</span><span class="p">());</span> <span class="c1">//add properties inside ConstructAndDispatchWhenReady()</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Things_to_Note">Things to Note</span></h2>
<ul><li> Do not create, delete, or modify UObjects inside the DoTask() of each task thread ( unless you are on 4.8 or after -Rama )</li></ul>
<ul><li> Do not call timers inside of DoTask()</li></ul>
<ul><li> Dont try to draw debug lines/points etc, it will likely crash (true as of 4.6.1)</li></ul>
<ul><li> If you follow the above rules you can send incremental progress to yourself on the main thread as I am doing.</li></ul>
<p>I am actually calling a function in my HUD class from my player controller pointer, from DoTask()&#160;!
</p>
<h2><span class="mw-headline" id="AsyncWork_Task_Templates">AsyncWork Task Templates</span></h2>
<p>In AsyncWork.h you will find some great templates for tasks, such as FAsyncTask and FAutoDeleteAsyncTask
</p><p>I would post the code here but I can't due to the fact that this a public wiki.
</p><p>Have fun exploring AsyncWork.h!
</p>
<h2><span class="mw-headline" id="What_About_Platforms_Without_Multithreading.3F">What About Platforms Without Multithreading?</span></h2>
<p>Note that the task graph system accounts for whether the destination platform does not support multithreading, which at the moment is only HTML5 as far as I know. iOS and Android have multi-threading support.
</p><p>Inside of FTaskGraphImplementation::QueueTask
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">FPlatformProcess</span><span class="o">::</span><span class="n">SupportsMultithreading</span><span class="p">())</span>
<span class="p">{</span>
<span class="c1">//...</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
  <span class="n">ThreadToExecuteOn</span> <span class="o">=</span> <span class="n">ENamedThreads</span><span class="o">::</span><span class="n">GameThread</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="Further_Reading">Further Reading</span></h2>
<p>Check out 
</p>
<pre> Core/Private/Async/TaskGraph.cpp 
</pre>
<p>to see how the tasks are created, and how whether the platform supports multi threading is taken into account!
</p>
<h3><span class="mw-headline" id="ParallelFor">ParallelFor</span></h3>
<p>This is a great article, but if you have a "really simple function" that you just want to run split-up between threads, take a look at ParallelFor (Runtime/Core/Public/Async/ParallelFor.h).  ParallelFor uses the Task Graph System underneath the covers. Use ParallelFor if you NEED results for a bunch of calculations this frame, and you can't use results that are a couple of frames old.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="n">int32</span> <span class="n">MaxEntries</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
<span class="n">ParallelFor</span><span class="p">(</span> <span class="n">MaxEntries</span><span class="p">,</span> <span class="p">[](</span><span class="n">int32</span> <span class="n">CurrIdx</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">// Your implementation may fetch/store results based on the CurrIdx, but</span>
	<span class="c1">// for simplicity we just have some dummy &quot;expensive&quot; calculation here.</span>
	<span class="n">int32</span> <span class="n">Sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">for</span> <span class="p">(</span> <span class="n">int32</span> <span class="n">Idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">Idx</span> <span class="o">&lt;</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span> <span class="o">++</span><span class="n">Idx</span> <span class="p">)</span>
	<span class="p">{</span>
		<span class="n">Sum</span> <span class="o">+=</span> <span class="n">FMath</span><span class="o">::</span><span class="n">Sqrt</span><span class="p">(</span> <span class="mf">1234.56f</span> <span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span> <span class="p">);</span>
</pre></div>
<p>For example, the above calculation takes about 30ms (on my PC) to run with a single thread, but just using ParallelFor will split the calculation between threads, making it complete in about 10ms instead.
</p>
<h2><span class="mw-headline" id="Conclusion">Conclusion</span></h2>
<p>Enjoy!
</p><p><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=User:Rama" title="User:Rama">Rama</a> (<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=User_talk:Rama" title="User talk:Rama">talk</a>)
</p>
<!-- 
NewPP limit report
Cached time: 20200401004825
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.036 seconds
Real time usage: 0.542 seconds
Preprocessor visited node count: 151/1000000
Preprocessor generated node count: 296/1000000
Post‐expand include size: 20/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.904      1 -total
100.00%    0.904      1 Template:Rating
-->
</div>
<!-- Saved in parser cache with key wiki_pd05v2:pcache:idhash:106-0!canonical and timestamp 20200401004825 and revision id 213
 -->
</div>						<div class="printfooter">
							Retrieved from "<a dir="ltr" href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&amp;oldid=213">https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Multi-Threading:_Task_Graph_System&amp;oldid=213</a>"						</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Tutorials&amp;action=edit&amp;redlink=1" class="new" title="Category:Tutorials (page does not exist)">Tutorials</a></li><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Code" title="Category:Code">Code</a></li><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Community_Videos" title="Category:Community Videos">Community Videos</a></li><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Community_Created_Content" title="Category:Community Created Content">Community Created Content</a></li></ul></div></div>					<div class="visualClear"></div>
									</div>
			</div>
		</div>
		<div id="eg-footer" role="contentinfo">
			<!DOCTYPE html><html data-baseurl="https://www.unrealengine.com"><head><meta charSet="UTF-8"><meta httpEquiv="X-UA-Compatible" content="IE=9;IE=10;IE=11;IE=Edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"><meta name="host" content="ue-website-node-prod07-i-08a23efcd19f60be7"><meta name="worker" content="80"><link rel="apple-touch-icon" sizes="180x180" href="https://mediawikiv2-website-prod05.ol.epicgames.net/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-16x16.png"><link rel="manifest" href="https://mediawikiv2-website-prod05.ol.epicgames.net/manifest.json"><link rel="mask-icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/safari-pinned-tab.svg" color="#2a2a2a"><meta name="apple-mobile-web-app-title" content="Unreal Engine"><meta name="application-name" content="Unreal Engine"><meta name="msapplication-TileColor" content="#0aaff1"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="theme-color" content="#0aaff1"><title data-react-helmet="true"></title></head><body><div id="epicGamesFooter"></div><script>window._epicGamesFooter = {"serverUrl":"https://www.unrealengine.com","socialLinks":[{"_type":"Epic Footer Social Link","id":"twitter","href":"https://twitter.com/unrealengine"},{"_type":"Epic Footer Social Link","id":"facebook","href":"https://www.facebook.com/UnrealEngine"},{"_type":"Epic Footer Social Link","href":"http://www.twitch.tv/unrealengine","id":"twitch"},{"_type":"Epic Footer Social Link","id":"instagram","href":"http://instagram.com/UnrealEngine"},{"_type":"Epic Footer Social Link","href":"http://www.youtube.com/unrealengine","id":"youtube"},{"_type":"Epic Footer Social Link","href":"https://www.unrealengine.com/rss","id":"rss"}],"_currentVersion":"1.89","copyrights":["© 2004-{YEAR}, Epic Games, Inc. All rights reserved. Unreal and its logo are Epic’s trademarks or registered trademarks in the US and elsewhere."],"newsLetterConfigs":{"enableNewsLetterCMS":true,"titleMsg":"Sign up for Unreal Engine news!","btnTxt":"Subscribe","_type":"Epic Footer News Letter","logo":"https://cdn2.unrealengine.com/Unreal+Engine%2FUE-Logo-988x988-1dee3bc7f6714edf3c21ee71826ebab54ae02077.png","successMsg":"You have successfully subscribed to Unreal Engine Newsletter.","loginRequired":false},"legalTags":[],"_type":"Epic Games Footer","newLineCopyrights":false,"_lastModifiedBy":"tony.rossi","epicPropertyName":"unreal_engine","_createdBy":"tony.rossi","_uuid":"dbad9ee8-9ebd-49e5-a448-e930feda5b65","logos":[{"_type":"Epic Footer Logo","href":"https://www.epicgames.com?lang=en-US","id":"eg","title":"Epic Games"},{"_type":"Epic Footer Logo","id":"ue","href":"https://www.unrealengine.com"}],"callToAction":{"_type":"Epic Header Call To Action","useCustomCallback":false,"title":""},"_futureVersion":"none","_created":"2017-08-21T08:59:33.817Z","messages":{"_type":"Epic Footer Messages","tos":"Terms of Service","privacy":"Privacy Policy"},"links":[{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/features","title":"Features"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/branding","title":"Logo & Branding"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://trello.com/b/TTAVI7Ny/ue4-roadmap","title":"Roadmap"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/education","title":"Education"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/academic-partners-apply","title":"Academic Partners"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/resources","title":"More Resources"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/awards","title":"Awards"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/custom-licensing","title":"Custom License Terms"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://dev.epicgames.com","title":"Online Services"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/training-partners","title":"Training Partners"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://www.epicgames.com/site/community-rules","title":"Community Rules"}],"hideDefaultTermsPolicy":false,"_lastModified":"2020-03-20T13:39:17.770Z","_version":{"_comment":"Publish The Common Content Type to server ","_createdBy":"tony.rossi"},"_locale":"en_US","isEu":false,"useServerUrl":true};
window.__locale = '';
</script><link key="footer-css" rel="stylesheet" href="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/footer.epic-unreal-engine.5ace4ab88c6f6357685f.css"><script src="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/footer.epic-unreal-engine.5ace4ab88c6f6357685f.js"></script></body></html>		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.036","walltime":"0.542","ppvisitednodes":{"value":151,"limit":1000000},"ppgeneratednodes":{"value":296,"limit":1000000},"postexpandincludesize":{"value":20,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"timingprofile":["100.00%    0.904      1 -total","100.00%    0.904      1 Template:Rating"]},"cachereport":{"timestamp":"20200401004825","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":69});});</script>
	<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"93a8bd5691","applicationID":"145396307","transactionName":"MlxXbUBZWkJUAkVQCgsWdFpGUVtfGgBSTQwKVxpPW11D","queueTime":0,"applicationTime":102,"atts":"HhtUGwhDSUw=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
