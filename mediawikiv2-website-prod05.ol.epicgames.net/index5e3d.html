<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&oldid=901 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 01:55:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"93a8bd5691",applicationID:"145396307"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script>
<title>Dynamic NPC Dialogue System Tutorial - Epic Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Dynamic_NPC_Dialogue_System_Tutorial","wgTitle":"Dynamic NPC Dialogue System Tutorial","wgCurRevisionId":901,"wgRevisionId":901,"wgArticleId":450,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Tutorials","Community Created Content","Blueprint"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Dynamic_NPC_Dialogue_System_Tutorial","wgRelevantArticleId":450,"wgRequestId":"adaa6a9fb9a603c875a8be6b","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.options@0bhc5ha",function($,jQuery,require,module){mw.user.options.set([]);});mw.loader.implement("user.tokens@071vexb",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/

});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="load3fc3.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="load2c8d.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<meta name="generator" content="MediaWiki 1.30.0"/>
<meta name="robots" content="noindex,nofollow"/>
<link rel="shortcut icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://mediawikiv2-website-prod05.ol.epicgames.net/opensearch_desc.php" title="Epic Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://mediawikiv2-website-prod05.ol.epicgames.net/api.php?action=rsd"/>
<link rel="license" href="https://www.epicgames.com/tos"/>
<link rel="alternate" type="application/atom+xml" title="Epic Wiki Atom feed" href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/resources/lib/html5shiv/html5shiv.min.js?40bd4"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Dynamic_NPC_Dialogue_System_Tutorial rootpage-Dynamic_NPC_Dialogue_System_Tutorial skin-vector action-view"><!DOCTYPE html><html data-baseurl="https://www.unrealengine.com"><head><meta charSet="UTF-8"><meta httpEquiv="X-UA-Compatible" content="IE=9;IE=10;IE=11;IE=Edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"><meta name="host" content="ue-website-node-prod07-i-0b48461a8a6519d83"><meta name="worker" content="170"><link rel="apple-touch-icon" sizes="180x180" href="https://mediawikiv2-website-prod05.ol.epicgames.net/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-16x16.png"><link rel="manifest" href="https://mediawikiv2-website-prod05.ol.epicgames.net/manifest.json"><link rel="mask-icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/safari-pinned-tab.svg" color="#2a2a2a"><meta name="apple-mobile-web-app-title" content="Unreal Engine"><meta name="application-name" content="Unreal Engine"><meta name="msapplication-TileColor" content="#0aaff1"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="theme-color" content="#0aaff1"><title data-react-helmet="true"></title></head><body><div id="epicGamesNavigation"></div><script>(function () {
    var config = {"serverUrl":"https://www.unrealengine.com","locale":"en-US","localeOptions":[{"lang":"en-US","name":"English"},{"lang":"ko","name":"한국어"},{"lang":"ja","name":"日本語"},{"lang":"zh-CN","name":"简体中文"}],"euCookieStrings":{"cookieString":"We use cookies to ensure the best experience on all Epic Games websites. To learn more, please see our {0}.","policyString":"privacy policy","closeString":"Close","policyUrl":"https://www.epicgames.com/privacypolicy"},"_currentVersion":"1.37.2.101.61.0.1","_type":"Epic Games Nav","hideSignIn":true,"_lastModifiedBy":"tony.rossi","epicPropertyName":"unreal_engine","pcDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncherInstaller.msi?productName=unrealengine","_createdBy":"tony.rossi","_uuid":"a0357fbf-1bd5-4eca-bbbf-48ea56e4ddb1","callToAction":{"_type":"Epic Header Call To Action","useCustomCallback":true,"href":"http://unrealengine.com/register","title":"Download"},"hideCallToAction":false,"hideLocale":true,"accountLinks":{"signOutLink":{"_type":"Epic Header Action Link","useCustomCallback":true,"href":"http://unrealengine.com/logout","key":"signout"},"dropdownLinks":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"http://unrealengine.com/account/personal?lang=en-US","title":"Personal","key":"personal"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://publish.unrealengine.com","title":"Seller","key":"seller"}],"signInLinks":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/id/login","title":"Sign In","key":"signin"}],"_type":"Epic Header Account Links"},"logoLink":{"_type":"Epic Header Action Link","useCustomCallback":true,"href":"http://unrealengine.com/","key":"logo"},"_futureVersion":"none","_created":"2017-08-21T08:59:33.648Z","_activeDate":"2019-05-31T08:22:43.049Z","macDownloadUrl":"https://launcher-public-service-prod06.ol.epicgames.com/launcher/api/installer/download/EpicGamesLauncher.dmg?productName=unrealengine","messages":{"search":"Search","default_download":"Get Epic Games","default_username":"Account","_type":"Epic Header Messages","locale":"English","sign_in":"Sign In","sign_out":"Sign Out"},"links":[{"isBarDivider":false,"_type":"Epic Header Link","useCustomCallback":true,"href":"http://unrealengine.com/blog","title":"News","key":"blog"},{"isBarDivider":false,"_type":"Epic Header Link","useCustomCallback":false,"title":"About","key":"about","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/features","title":"Features"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/release-notes/","title":"What's New"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://trello.com/b/TTAVI7Ny/ue4-roadmap","title":"Roadmap","target":"_blank"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/faq","title":"FAQ"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Industries","key":"industries","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/games","title":"Games"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/architecture-solution","title":"Architecture"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/automotive-transportation","title":"Automotive & Transportation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/broadcast-live-events","title":"Broadcast & Live Events"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/film-television","title":"Film & Television"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/training-simulation","title":"Training & Simulation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/industry/more-uses","title":"More Uses"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Learning & Support","key":"learn","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/learn","title":"Get Started"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://docs.unrealengine.com/","title":"Documentation"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/onlinelearning-courses","title":"Online Learning","key":""},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/events/webinar-series","title":"Webinars"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/education","title":"Education"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/support","title":"Support"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://issues.unrealengine.com/","title":"Issues"}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Community","key":"community","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://forums.unrealengine.com/","title":"Forums"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://answers.unrealengine.com/","title":"AnswerHub"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/megagrants","title":"MegaGrants","key":""},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://communities.unrealengine.com","title":"User Groups"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/events","title":"Events"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/programs/nvidia-edge","title":"Nvidia Edge","key":"programs"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/programs/intel-unreal","title":"Intel + Unreal","key":""}]},{"isBarDivider":false,"_type":"Epic Header Link","collapseTarget":"More","useCustomCallback":false,"title":"Marketplace","key":"marketplace","kids":[{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"http://unrealengine.com/marketplace","title":"Browse"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://publish.unrealengine.com/","title":"Submit Content"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/marketplace-faq","title":"Marketplace FAQ"},{"_type":"Epic Header Submenu Item","useCustomCallback":true,"href":"http://unrealengine.com/marketplace-guidelines","title":"Marketplace Guidelines"},{"_type":"Epic Header Submenu Item","useCustomCallback":false,"href":"https://forums.unrealengine.com/forumdisplay.php?56-Marketplace","title":"Marketplace Forums"}]}],"hideSearch":false,"_lastModified":"2020-01-30T21:35:59.869Z","_version":{"_comment":"Publish to server UnrealEngine.com (Production)","_createdBy":"tony.rossi"},"_locale":"en_US","useServerUrl":true,"isEu":false};

    if (typeof window._egNavBeforeConfigSet === 'function') {
        window._egNavBeforeConfigSet();
        window._egNavBeforeConfigSetRun = true;
    }
    window._egNavBeforeConfigSetCalled = true;

    if (typeof window._epicGamesNav === 'undefined') {
        window._epicGamesNav = config;
    } else {
        var missingAssumeFalsey = ['hideLocale', 'hideSearch', 'hideSignIn', 'hideCallToAction'];
        for (var key in config) {
            if (typeof key === 'string') {
                if (!window._epicGamesNav[key] && config[key] !== null && missingAssumeFalsey.indexOf(key) === -1) {
                    window._epicGamesNav[key] = config[key];
                }
            }
        }
    }

    window._epicGamesNav.onSearch = function(query) {
        window.location.href = 'https://www.unrealengine.com' + '/bing-search?keyword=' + query;
    };

    if (typeof window._egNavAfterConfigSet === 'function') {
        window._egNavAfterConfigSet();
        window._egNavAfterConfigSetRun = true;
    }
    window._egNavAfterConfigSetCalled = true;
})();
window.__locale = '';
</script><link key="header-css" rel="stylesheet" href="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/header.epic-unreal-engine.5ace4ab88c6f6357685f.css"><script src="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/header.epic-unreal-engine.5ace4ab88c6f6357685f.js"></script></body>
<!-- Mirrored from mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&oldid=901 by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 01:55:11 GMT -->
</html>		<div class="container">
			<div id="mw-navigation">
				<h2>Navigation menu</h2>

				<div id="mw-head">
					<!-- 					<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Dynamic+NPC+Dialogue+System+Tutorial&amp;returntoquery=oldid%3D901" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>						</ul>
					</div>
					 -->
					<div class="homelink_container">
                        <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/" title="UE4 Wiki Home" class="homelink">HOME</a>
                    </div>
                    <div class="notice">
                    	We have temporarily disabled editing while we're working on a new Wiki!
                    </div>
					<div id="left-navigation">
											<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
														<li id="ca-nstab-main" class="selected"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial" title="View the content page [c]" accesskey="c">Page</a></span></li>
							<li id="ca-talk" class="new"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Talk:Dynamic_NPC_Dialogue_System_Tutorial&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										</div>
					<div id="right-navigation">
											<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
														<li id="ca-view" class="selected"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial">Read</a></span></li>
							<li id="ca-viewsource"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
							<li id="ca-history" class="collapsible"><span><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php" id="searchform">
							<div id="simpleSearch">
							<input type="search" name="search" placeholder="Search Epic Wiki" title="Search Epic Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
										</div>
				</div>
				
			</div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>

								<div class="mw-indicators mw-body-content">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Dynamic NPC Dialogue System Tutorial</h1>
												<div id="bodyContent" class="mw-body-content">
											<div id="siteSub" class="noprint">From Epic Wiki</div>
										
															<div id="jump-to-nav" class="mw-jump">
						Jump to:						<a href="#mw-head">navigation</a>, 						<a href="#p-search">search</a>
					</div>
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><b>Dialogue BP Created By:</b> Gmc
</p><p>If you have any questions, feel free to message me on the forums!
</p>
<hr />
<p><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Template:Rating&amp;action=edit&amp;redlink=1" class="new" title="Template:Rating (page does not exist)">Template:Rating</a> (This should work for all versions, but the ones listed are the ones I used to make this tutorial!)
</p>
<hr />
<div id="toc" class="toc"><div class="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction.21"><span class="tocnumber">1</span> <span class="toctext">Introduction!</span></a>
<ul>
<li class="toclevel-2"><a href="#Downloads:"><span class="tocnumber">1.1</span> <span class="toctext">Downloads:</span></a>
<ul>
<li class="toclevel-3"><a href="#Images"><span class="tocnumber">1.1.1</span> <span class="toctext">Images</span></a></li>
<li class="toclevel-3"><a href="#Conversation_Node"><span class="tocnumber">1.1.2</span> <span class="toctext">Conversation Node</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Videos:"><span class="tocnumber">1.2</span> <span class="toctext">Videos:</span></a></li>
<li class="toclevel-2 tocsection-1"><a href="#Quick_note:"><span class="tocnumber">1.3</span> <span class="toctext">Quick note:</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-2"><a href="#NPC_Section:"><span class="tocnumber">2</span> <span class="toctext">NPC Section:</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Picture_1.2F20.21"><span class="tocnumber">2.1</span> <span class="toctext">Picture 1/20!</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Picture_2.2F20.21"><span class="tocnumber">2.2</span> <span class="toctext">Picture 2/20!</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Picture_3.2F20.21"><span class="tocnumber">2.3</span> <span class="toctext">Picture 3/20!</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Picture_4.2F20.21"><span class="tocnumber">2.4</span> <span class="toctext">Picture 4/20!</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Dialogue_Widget_Section:"><span class="tocnumber">3</span> <span class="toctext">Dialogue Widget Section:</span></a>
<ul>
<li class="toclevel-2 tocsection-8"><a href="#Pictures_5.2F20-9.2F20"><span class="tocnumber">3.1</span> <span class="toctext">Pictures 5/20-9/20</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#CharacterTalkWidget"><span class="tocnumber">3.1.1</span> <span class="toctext">CharacterTalkWidget</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#SizeBoxWidget"><span class="tocnumber">3.1.2</span> <span class="toctext">SizeBoxWidget</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#ChacterWidget"><span class="tocnumber">3.1.3</span> <span class="toctext">ChacterWidget</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#CharacterWidgetGraph"><span class="tocnumber">3.1.4</span> <span class="toctext">CharacterWidgetGraph</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#CharacterExitWidget"><span class="tocnumber">3.1.5</span> <span class="toctext">CharacterExitWidget</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Dialogue_Graph_Section:"><span class="tocnumber">4</span> <span class="toctext">Dialogue Graph Section:</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Picture_10.2F20"><span class="tocnumber">4.1</span> <span class="toctext">Picture 10/20</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Picture_11.2F20"><span class="tocnumber">4.2</span> <span class="toctext">Picture 11/20</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Pictures_12.2F20-13.2F20"><span class="tocnumber">4.3</span> <span class="toctext">Pictures 12/20-13/20</span></a>
<ul>
<li class="toclevel-3 tocsection-18"><a href="#1NPC"><span class="tocnumber">4.3.1</span> <span class="toctext">1NPC</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#1Character"><span class="tocnumber">4.3.2</span> <span class="toctext">1Character</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-20"><a href="#Pictures_14.2F20-17.2F20"><span class="tocnumber">4.4</span> <span class="toctext">Pictures 14/20-17/20</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="#NPCLoopLeft"><span class="tocnumber">4.4.1</span> <span class="toctext">NPCLoopLeft</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#NPCLoopRight"><span class="tocnumber">4.4.2</span> <span class="toctext">NPCLoopRight</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#CharacterLoopLeft"><span class="tocnumber">4.4.3</span> <span class="toctext">CharacterLoopLeft</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#CharacterLoopRight"><span class="tocnumber">4.4.4</span> <span class="toctext">CharacterLoopRight</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-25"><a href="#Picture_18.2F20"><span class="tocnumber">4.5</span> <span class="toctext">Picture 18/20</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Picture_19.2F20"><span class="tocnumber">4.6</span> <span class="toctext">Picture 19/20</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Picture_20.2F20"><span class="tocnumber">4.7</span> <span class="toctext">Picture 20/20</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-28"><a href="#Advanced_Sections"><span class="tocnumber">5</span> <span class="toctext">Advanced Sections</span></a>
<ul>
<li class="toclevel-2"><a href="#Dynamic_Widget_References"><span class="tocnumber">5.1</span> <span class="toctext">Dynamic Widget References</span></a></li>
<li class="toclevel-2"><a href="#Dynamic_Line_Splits"><span class="tocnumber">5.2</span> <span class="toctext">Dynamic Line Splits</span></a></li>
<li class="toclevel-2 tocsection-29"><a href="#Story_Mode"><span class="tocnumber">5.3</span> <span class="toctext">Story Mode</span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Merchant_NPC"><span class="tocnumber">5.4</span> <span class="toctext">Merchant NPC</span></a></li>
<li class="toclevel-2"><a href="#Updated_Destroy_Section"><span class="tocnumber">5.5</span> <span class="toctext">Updated Destroy Section</span></a></li>
</ul>
</li>
</ul>
</div>

<h2 id="top"><span class="mw-headline" id="Introduction.21">Introduction!</span></h2>
<p>Hello everyone! This is going to be my tutorial on how to make a Conversation BP so that all you have to do is type in the text that the NPC will say and what the Player will be able to say back! There are a few text modifiers that you will need to add to your text for it to work correctly (IE. /br for a new line, and /lv for if the line will end the conversation. Both of these go at the end of the sentences.)
</p>
<h3><span class="mw-headline" id="Downloads:">Downloads:</span></h3>
<h4><span class="mw-headline" id="Images">Images</span></h4>Here is a link to the .ZIP folder of all of the pictures that will be used if you want to download them and follow along!<br />
<p><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=File:Conversation_Images.zip" title="File:Conversation Images.zip">File:Conversation Images.zip</a> (These may be out of date, use with caution)<br />
<br />
</p>
<h4><span class="mw-headline" id="Conversation_Node">Conversation Node</span></h4>
<p>Here is a link to the .ZIP folder for the completed Conversation Node<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=File:Conversation_Node.zip" title="File:Conversation Node.zip">File:Conversation Node.zip</a><br />
</p>
<h3><span class="mw-headline" id="Videos:">Videos:</span></h3>
<p>Here is the first video to the Tutorial Videos, this one is just a preview of what the BP can do so far!<br />
These videos will most likely be more update than the wiki as of 3/15/2015.<br />
&lt;youtube&gt;<a rel="nofollow" class="external free" href="https://www.youtube.com/watch?v=99Tfv7rjk1k&amp;list=PLXeTUtPB4J7IGd7QJA10eglxFLlCeOacy">https://www.youtube.com/watch?v=99Tfv7rjk1k&amp;list=PLXeTUtPB4J7IGd7QJA10eglxFLlCeOacy</a>&lt;/youtube&gt;<br />
Here is also the link to the video playlist: <a rel="nofollow" class="external text" href="https://www.youtube.com/watch?v=99Tfv7rjk1k&amp;list=PLXeTUtPB4J7IGd7QJA10eglxFLlCeOacy%7CPlaylist">Link</a>
</p>
<h3><span class="mw-headline" id="Quick_note:">Quick note:</span></h3>
<p>Blue Comments mean this part of the BP can be Changed/Altered/Removed to your liking or need.<br />
Red Comments mean this is Still In Development and is not needed for the project! <br />
Green Comments mean this part of the BP has to be EXACT for it to work!<br />
The Text Modifiers should go in this order from the end of the Text Line: /br,/lv,/mr,/qg. (EX: Hello!/qg/mr/lv/brHow are you?)
</p>
<h2><span class="mw-headline" id="NPC_Section:">NPC Section:</span></h2>
<h3><span class="mw-headline" id="Picture_1.2F20.21">Picture 1/20!</span></h3>
<p>So, to start us off, open up the Trigger image in the NPC folder! The NPC folder is where all of the images for the NPC BP are. This may look overwhelming at first, but I will go through everything step by step. To start us off, if you have not made an NPC Character BP yet, you will need to do that now. It will need to include a trigger component! Once you have done that we can get started! Now that you have your trigger component, select it and click “add event for trigger” in the details panel, we will need the OnComponentBeginOverlap event to start us off! Once you have that, create a branch off of the arrow, and drag off of the OtherActor pin and type in ==, connect the red output pin to the branch. Now right click in some open space and type in: PlayerCharacter, click the GetPlayerCharacter and attach the blue pen to the bottom blue pin of the ==. That is the first bit of our BP well done! The reason we have the == is to make sure only the player can activate the conversation! Now drag off of the True pin in the branch and get a DoOnce function. Now we come to an interchangeable point, depending on what you're going to do with your conversation BP this will be different! If your BP is going to be on the HUD like mine you will need to reference your player character! (The HUD BP is going to need to be a Widget BP, do not use a regular Hud BP!) (If you have not created the HUD, do so now).
</p><p>(If you have just created it and don’t know how to make it appear on your screen when you play, I will give you a quick explanation! For me, I have all of my characters stem off of one Master BP (I am using Mixamo’s Character Pack) so I will only have to do this once, but if you have multiple player characters that are not referenced by each other this will be harder to do. Ok, once you have opened up your player character put down an event begin, then attach it to a create widget, the HUD Widget BP will go in here! Attach an AddToViewport to the Create Widget (make sure to connect the 2 blue pins together!). Then right click on the blue pin on the CreateWidget and select PromoteToVariable, you can name it whatever you want! That's all you need to do in the BP for now!) Now go back to the NPC and drag off of the PlayerCharacter and type in CastTo(name of the player BP) and connect the input arrow to the output of the do once! (If your Conversation BP is going to be in a bubble or something above the NPC or whatever else, you will need to cast to that instead, this way is a little different.)
</p><p>Now drag off of the cast node from the blue pin and get your HUD variable (or whatever you called it). Now you will need to make a DataStructure BP, Create-Blueprints-Structure, open it and add 2-4 varies depending on if you want pictures next the character and NPC text, the variables are: 2 Texture 2D and 2 Text variables, name them whatever! Now go to your HUD BP and create a new variable, it will be a bool at first, just click on the variable type and change it to whatever you DataStruct was called (its name) Make sure to make it public! Now go back to the NPC, drag off of the HUD variable and type in the name of the variable you just created! Make sure you SET it not GET it. Then connect the input pin to the output of the cast node! Now, instead of what I did, (I used a Make Struct function) you can just right click on the dark blue pin and click SplitStructPin! Next, you will need to make variables of all of the new pins you have (you can just right click and promote them, but when you promote the Pink ones, delete them and make each one into an array) now CTRL drag them onto the graph and drag off of them and get a Get node, attach them to their respective input nodes on the SetStruct node. Now head back to your Hud and make a variable of the NPC (this will be its name, make it public!) Also while you there quickly make a CustomEvent. Now go back to the NPC and drag off of the hud and Set you new variable to SELF, then drag off of the hud again and type Call(name of your new CustomEvent) Now you are done with the First Picture! We are well on our way to finishing this BP! Only 19 more pictures to go!
</p>
<h3><span class="mw-headline" id="Picture_2.2F20.21">Picture 2/20!</span></h3>
<p>You will need to open ConstructionScript in the NPC folder! These next 3 Pictures are going to be pretty quick, so I’m going to compile them all into one! As the pictures state you will need to open up the Construction Scrip of your NPC! Right click on the graph and get the SELF node! Drag off of that and get the Set Material Node. Promote the Material pin to a variable and make it public, this way whenever you duplicate you NPC, if it looks different all you have to do is change the public MAT variable! This next blue part is to load from a save file what character you're playing as so it can correctly set the Character Image when you're talking to someone! For now we can just make it, but not connect it since it won't work unless you have a save game and pictures of every character, when you do all you will need to do is connect the white arrows together! ALT drag off your character Image variable (if you don't need images in your conversation, skip this part) Now make a new DataStruct with however many characters you have (including different genders) (the variables will need to be Texture 2D) Now the way I have it set up is with an array of INTs, the first (Array 0) is the character type (swordsman, archer, mage) the second (Array 1) is the gender, after that is what the character has equipped (one for Head Armor, Leg Armor, Weapons, ETC.) This how I did it, you can do it anyway you want! Now make a new variable for the new Data Struc you made, CTRL drag it onto the graph, and right click the pin, and choose Split Struct (I did not do that but its cleaner this way!) Now depending on how many different character types you have, you will need to make a Select Node with that many options, if you have Genders also, make a Select for that too (you will need to duplicate the first select for however many genders you have) Now attach the output pins of the Data Struct Variable to the corresponding Switch Nodes (the gender switch node goes last) and attach the output of the gender switch (if you have one, if not then the first switch you created) to the character image variable! We are now done with the Construction Script!
</p>
<h3><span class="mw-headline" id="Picture_3.2F20.21">Picture 3/20!</span></h3>
<p>LeaveAndSendLines in the NPC folder! This is the rest of the graph for the NPC! We shall start on the left side and go down! First, make a custom event that will be called from the hud when the player wants to leave the conversation! This next part is if your NPC is an AI and walks around (Mine does, so when it receives this is will walk away from the player!) Later on I will add a function to this that will let you choose if you NPC walks around, or is maybe a merchant or something that stays in one spot! But for now you will have to choose, Either Or. Once you have decided on this, create a new INT variable and ALT drag it onto the graph, connect it to Either the Event OR the SetValueAsBool Function if your AI walks around! Now on to the bottom of the Picture! Depending on how many Options your character can choose! I could make this so you only have to make 1 event and it checks to see what options was clicked and act accordingly using an INT variable, but for now we shall leave it like this! Next Make a new Custom Function by going into the top right part of the screen and clicking on the big F! Attach this new function to each Event by dragging it from the variables section onto the graph! We are now done with this picture!
</p>
<h3><span class="mw-headline" id="Picture_4.2F20.21">Picture 4/20!</span></h3>
<p>SendLinesFunction Still in the NPC folder! Before you start, if you want to make a custom variable out of the Hud variable that comes out of your cast function from the first picture, do it now (This will make things easier in the Custom Function) Open up your newly created Custom Function! If you made a new variable for the hud variable, you do not need the blue comment part, just get your new hud variable, drag from the pin and SET the Conversation Data Struct (the one with the pictures and text) Split the Dark Blue pin, and connect the input to the output of the purple box! Now get each corresponding variable and connect the to the split pins, Also I did not mention this, but the Text Arrays need to be Public as well as the NPC Image. Now click on the purple box and under Inputs click new and change the variable into an INT, now CTRL drag the first INT variable you made, connect it’s pin to a Multiply node (just put in ‘INT *’ and you will find it, make sure its INT * INT) and set the button number to however many options you have, as I said before this will be dynamic later on! Now drag off of the * node’s output pin and get a + node, connect the bottom of this to the purple box’s INT pin! Connect the + to the Get Array Node’s INT input pins! Now ALT drag the INT variable you made, connect its Input Execute pin to the Set Data node’s output pin, drag off of the Set Int Node and attach it to the Multiply '+' combo from the Int variable. Now drag off of your HUD variable and call the custom event again! Now you're done! Until next time!<br />
--GMC<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#top" title="Dynamic NPC Dialogue System Tutorial">To Top</a>
</p>
<h2><span class="mw-headline" id="Dialogue_Widget_Section:">Dialogue Widget Section:</span></h2>
<h3><span class="mw-headline" id="Pictures_5.2F20-9.2F20">Pictures 5/20-9/20</span></h3>
<p>There are 5 pictures in this section! CharacterTalkWidget, CharterExitWidget, and SizeBoxWidget, CharacterWidget, and CharacterWidgetGraph! They are located in the Hud&amp;Examples folder! We are finally onto the bones of our system! This is where the magic happens, and becomes complicated! Open up your Hud BP and click on the Designer tab, this is where you will create the layout and looks of your conversations! Now there's a lot in these pictures, and you don't need most of it, since a lot of the stuff in the picture is for my HUD overlay and not used in conversations. Let's get started by adding in 2 Grid Panels. These will hold everything for your character and NPC.
</p>
<h4><span class="mw-headline" id="CharacterTalkWidget">CharacterTalkWidget</span></h4>
<p>Looking at the CharacterTalkWidget picture, we need to set both of these grid panels like so: Anchor one to the bottom middle of the screen, this is your character holder, and one to the top, your NPC holder. Look down a little and set the Alignment to: X 0.5 and Y can be 0, I made it 2 because the XP bar gets in the way if I don't. Now below that, click SizeToContent, this will let us not have to mess with resizing the grid panels. Now click the plus twice in Column Fill. Set the first one to .5, the second to 1 (if you don't not have pictures you don't need this part) Now go down to visibility and set it to Hidden, then click Bind and Create Binding. This will bring up the BP graph, drag off of the green pin and get a Select node, set the WildCard to bool, and promote it to a new variable. Now set False to Hidden and True to Self Hit Test Invisible. Now go back to the Designer and add 1 SizeBox to the grid panels. Then add a VerticalBox to the SizeBox, this is where all of the text will show up! Next under the Size box, in Column, set it to 1. Also, if your conversation will have images, add a scale box and add an image to that. Set the image Alignment to center. Also set the VerticalBox Alignment to full. (Everything should be set to full except for the image)
</p>
<h4><span class="mw-headline" id="SizeBoxWidget">SizeBoxWidget</span></h4>
<p>Now open up the SizeBoxWidget picture, this will determine the max/min size of the conversation boxes, you can make this whatever size you want, but be careful of overlap and it goes off screen or being too small! To set up the max/min size, make sure the Horizontal and Vertical alignment are set to full (the big bars going left/right and up/down.) Next, go to child layout, the last 4 options are what you want, these will set the max/min size your conversation box can get!
</p>
<h4><span class="mw-headline" id="ChacterWidget">ChacterWidget</span></h4>
<p>Now open up the ChacterWidget picture, this is a separate widget BP you will need to make, you will need to make 2, one with a button for the player and one without for the NPC. Once you have created the new widget BPs add a button to the Character Widget (This will be the root, so make sure to delete the Canvas Panel before adding anything! This goes for the NPC Widget too!) Next, add a Scale Box to both of the Widgets, and a Text Block to that!
</p>
<h4><span class="mw-headline" id="CharacterWidgetGraph">CharacterWidgetGraph</span></h4>
<p>Now open the CharacterWidgetGraph picture. Go to the graphs of both Widgets and a Text Variable and a bool to the Character Widget, this will tell us if the button is clicked or not! Now go back to the Designer and for both Text Boxes, under Content, Bind the Text to the newly created Text Variable! Also for Button in the Character Widget, go down to the bottom where it says Events, click OnClicked, this will bring you to the Graph section. ALT drag the Bool and connect it to your OnClicked event! Make sure all of the variables you made are public! Then create a new Event Dispatcher and connect it to the Bool. Now go back to your Conversation BP (or HUD BP) and in the top left of the Designer, scroll down to the bottom. There you will see your new Widgets you just made! Go ahead and drag the Character Widget into the VerticalBox for the Character Holder, this will be our Leave Conversation option, which is why we are adding it now, this will make it not able to be deleted like the rest of the options, although if you do not want the player to leave mid conversation I might add an option later to make it invisible!
</p>
<h4><span class="mw-headline" id="CharacterExitWidget">CharacterExitWidget</span></h4>
<p>Now open up the CharacterExitWidget picture! This shows how it will be setup! You will need to make the Size option, under Slot at the top, Full and the Alignment to Full also! Then in the Default box, put something in Conversation Text indicating that this is the leave option! Right below that, in the style section, you may need to change the Foreground Color to Inherit so the text will be Black (you can also just make it black and it does not have to be black either, its just easy to read on the white button, which you can also change the color of! This is the Color and Opacity option right above the Foreground Color!) And now we are done with this section! Hoorah! --GMC<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#top" title="Dynamic NPC Dialogue System Tutorial">To Top</a>
</p>
<h2><span class="mw-headline" id="Dialogue_Graph_Section:">Dialogue Graph Section:</span></h2>
<h3><span class="mw-headline" id="Picture_10.2F20">Picture 10/20</span></h3>
<p>‘Create’ in the Player folder! We are now onto the BP section of our Conversation System! You remember that Custom Event you made here once? That is going to be the start of it all! Once you have opened the Create picture, get the InputModeGameAndUI Function, the Target will be the Player Controller the Widget to Focus can be Self (I have something different, but id does not change anything). This will let our mouse be seen, if you do not want the mouse to go offscreen, click Lock Mouse, also make sure Hide Cursor is NOT clicked! This next part is for pictures only, if you don't have pictures, skip this! (If I have said this already then sorry: I am planing to make the pictures also an option for if you want them or not! For those people out there with Bubble Conversations, it may not look good with the pictures! I could also make it so you only have one picture!) To start us off, CTRL drag the NPC Image and Character Image onto the graph, drag off a Set Brush Function from their pins. Now CTRL drag the Conversation Data Struct and split the pins! Attach the blue pins to their corresponding inputs in the Texture pin of the Branch Function! Now attach a Sequence Node to the Brush Output. Create a new Custom Function, this will split the text lines if there is the /br modifier or exceeds at character limit (Work In Progress). Create a String Variable for it’s Input, the Output will have one Bool and 2 Text Variables (Ignore everything else). Now drag off a Branch Node from the Custom Function you made. Off of the true, make a CreateWidget node, then right click on it and press Collapse to Nodes. Remember to do this twice! Now in these newly created Nodes, make 2 Text variable pins and 2 Execute pins in the Input, the Output only needs 1 Execute. Create 2 new String Variables, one for the NPC and one for the Character. ALT drag these and hook them up to the Output of the Nodes you created, then right click the Set String Variables and make them into Nodes! These nodes need no output, just 1 String input. Drag the Text pin from the Data Struct to the Input String pin, it will do the conversion for you!
</p>
<h3><span class="mw-headline" id="Picture_11.2F20">Picture 11/20</span></h3>
<p>CheckLineFunction in the Player folder! This is the picture for the Custom Function you made in the before section! Open it up and lets get started! First off, the Red Comment can be explained <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#DLS" title="Dynamic NPC Dialogue System Tutorial">Here</a>. Drag off of the String Output pin, and get the Split Function, set the In Str to: /br (Or whatever modifier you want to put in the text to mean its a new line! I recommend this only being 3 characters, or you might have to modify the Right Chop coming up) Drag the Left S to the Left Text Input pin in the purple box to the right, it will convert it for you. Now for the Right S, drag off and get Right Chop to take off the modifier from the text (So it wont show up in the Conversation). Take it’s Output and connect it to the other Text Input pin. Lastly, hook up the Split’s bool the Input bool on the right!
</p>
<h3><span class="mw-headline" id="Pictures_12.2F20-13.2F20">Pictures 12/20-13/20</span></h3>
<h4><span class="mw-headline" id="1NPC">1NPC</span></h4>
<p>1NPC in the Player folder! Ok to start us off, open the first Node you created with the CreateWidget, make sure its the NPC node, the Character Node will be a little different. Connect the Create Widget to the Left Purple box, assign the class to your Custom NPC Widget you made earlier. Now CTRL drag the Vertical Box for the NPC onto the graph, drag off of that and get Add Child, connect the Content pin to the Blue Output pin of the Create Widget, and hook up the Executes. Now drag off of the Blue Create Widget pin and get the Set Slot as Vertical Box Function, drag off of that and get Set Size Function, split the pin and make sure it’s set to Full. Now right click the Blue Widget pin and promote it to a variable, go <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#DWR" title="Dynamic NPC Dialogue System Tutorial">Here</a> for how to make this dynamic. Make sure to hook up the Execute pins for the Set Variable you just Promoted. One last time, drag off of the Blue Widget pin and set the Conversation Text Variable, hook its Text Input pin to the first Text pin in the Blue box on the left and hook its Output Execute pin to the right Blue Box. Now for the bottom part of the picture...just select everything you made above and press CTRL W, make sure to hook up the execute pin to the Left Blue Box (not the right) and the Set Conversation Text pin to the other Text Pin in the Blue Box.
</p>
<h4><span class="mw-headline" id="1Character">1Character</span></h4>
<p>Now open up the 1Character Picture! This is a little different, but go ahead and CTRL C everything you did just now, CTRL V to paste it into the Character node (you might have 2 sequence nodes now, just delete the one that is not hooked up to the Create Widgets. Now here comes the part that is different. Create a new Custom Function in between the Set Character (Replace all the NPC stuff with the Character stuff, this includes the Class for the Create Widgets) This function will need a Text Variable Input and Output, also an INT Input (set this to 1) Drag off of the Text Output pin and get Format Text, in the format section type this: {Number} {Text} (you can just copy paste this into it) now there will be 2 more Text Input pins, in the Number pin put ‘1)’ (or what numbering system you want) and connect the Text pin to the Text Output pin of the Custom Function, connect the Text Output pin of the Format Text to the Set Conversation Text. Now you remember that Binding you made in the Designer with the bool variable? ALT drag that and set it to True (check mark). Do everything the same for the bottom part of the picture! (There is possibly a bug with the Format texts, whenever I change the Format options, I get an Internal Compiler Error. If you get this, just save everything and close unreal, when you reopen it, it will have fixed itself).
</p>
<h3><span class="mw-headline" id="Pictures_14.2F20-17.2F20">Pictures 14/20-17/20</span></h3>
<h4><span class="mw-headline" id="NPCLoopLeft">NPCLoopLeft</span></h4>
<p>Ok, so once you have opened up the NPLoopLeft picture, open the 2nd Node you you made with the Set String Variable. Attach a While Loop to the execute of the Variable, Promote the bool that comes with this and set it to True by default. Now if you copied everything for the 1Character part, just paste that here, but delete the bottom stuff, also the Source String for the Check Line Function you will attach to the variable at the beginning of this node. (Just CTRL drag it onto the pin) Now this next part of the picture you can ignore because it is not finished yet!
</p>
<h4><span class="mw-headline" id="NPCLoopRight">NPCLoopRight</span></h4>
<p>You may want to look at <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#DWR" title="Dynamic NPC Dialogue System Tutorial">This</a> and <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#DLS" title="Dynamic NPC Dialogue System Tutorial">This</a> while working on this picture!<br />
Ok, open up NPCLoopRight! Attach a Branch on to the Check Line Function, connect the Bool from the Function to the Bool of the Branch! Now for the True Execute pin Set the String Variable that we were using to the last Text Output pin of the Check Line Function. Next, you actually don't need the Set Bool, just skip it and instead Set the Conversation Text for the Create Widget. Now get a Switch On INT, you don't need the default pin and make sure there are 1 less than the max amount of options you character can have, right now you will never get the last option, but it's good to have since you will need it later. (This will change when I enable the ‘Story’ Function). Promote the Switch’s INT Input. ALT drag the 3 duplicates of the Create Widget Variable and connect them according to the picture and connect their Outputs to a Set INT Variable. The Input pin of this will be attached to an INT+INT adding 1 and connected to the Get of this Variable. Now CTRL W all of it and attach it to the False Output of the Branch, make sure to add a Set Bool for the Loop Bool and set it to False (no check). Also the Conversation Text will be attached to the String Variable you have in this Node. Lastly, delete the + connected to the Set INT and set it to 1.
</p>
<h4><span class="mw-headline" id="CharacterLoopLeft">CharacterLoopLeft</span></h4>
<p>Now open up the CharacterLoopLeft picture. This is mostly the same as before so you can just Copy Paste everything into the Character Node, just remember to switch out all of the NPC stuff with the Character equivalents! Ok we don't the LoopLeft picture anymore, but we do need the CharacterLoopRight!<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#top" title="Dynamic NPC Dialogue System Tutorial">To Top</a>
</p>
<h4><span class="mw-headline" id="CharacterLoopRight">CharacterLoopRight</span></h4>
<p>There are a few differences here than the NPC one. In Between the Set String and Set Conversation Text in the top, we will need the Custom Function we made in the 1NPC and 1Character sections! You also remember that Format Text we made? Copy and Paste that too and connect it to the Custom Function! Although there is one thing you need to add to the Format, if your numbering system has something after the number (IE. ‘)’ ‘.’ etc.) put it after {Number} in the Format section, so it will look this this: {Number}). Now attach that to the Set Conversation. Ok, for this next part, the picture does not have an + node, you will need this for the Set Variable and the To Text (INT), but just connect the regular variable to the INT Input of your Custom Function (No + node). Now do everything the same for the bottom part, just remember to set the Set INT Variable to 1 and add in the Set Loop Bool and set it to False!
</p>
<h3><span class="mw-headline" id="Picture_18.2F20">Picture 18/20</span></h3>
<p>CheckLV in the Player Folder! So first things first... this picture is also wrong! You will need to add a Subtract INT onto the INT Output, set it to subtract 1! You will also need to manually convert the Text Variable to a String! Just drag off of it and type in: String! Now off of the String converter, get an Ends With Function and set the Suffix to whatever modifier you want and the end of a Text Line to indicate that it will end the Conversation (this can be as big or small as you like, compared to the first modifier we made! However, be careful with some ones, especially real letters, it will take out EVERYTHING with the modifier. So if you put ‘the’ as the modifier, you will no longer have ‘the’ in any of your sentences and most of your sentences will end the conversation (since most Conversations have ‘the’ in the line!) Next, you will need to create a new Array of Bools, it will have as many Bools as there are options for the Character to choose from! (This could also possibly be dynamic by changing the Set Array Elem to Add Array Elem or setting Size To Fit to True on the Set Array Elem, but that might not work right now.) So once you have created the Bool Array, CTRL drag it onto the graph and drag off of its Output and type in Set Array, hook the Index to the INT Output in the Purple Box and hook the Item to the Bool Output of the Ends With Function. Now drag off of the String Converter again and get the Replace Function, set the From to you Leave Modifier and the To leave as blank. Drag the String Output of the Replace Function onto the Input Text Variable in the Purple Box to the right, it will convert it for you! We have now finished with the creation of our Conversation System, now we need to reset it back to its default state!
</p>
<h3><span class="mw-headline" id="Picture_19.2F20">Picture 19/20</span></h3>
<p>This has been drastically updated <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#UDS" title="Dynamic NPC Dialogue System Tutorial">Here</a>!<br />
</p><p>Destroy! Since taking this picture, I have greatly updated this part of the section to get ready for a Dynamic number of options, so I will have to walk you through this with little help of the current Image you have (some stuff is still the same though!) We shall first create the Event Tick with a Sequence attached to it. There is a branch attached to the first Then and a second Sequence to the second Then, add as many execute pins are there are options for the second Sequence. Also add a DoOnce to the first Branch. From here we will do as the picture says, but anything with a Reroute Node do not attach or the other 2 Sequence Nodes! I will get to that later! Let's start with the top first. Off of the DoOnce get the Set Input Mode Game Only Function, this will make the mouse go away, make sure to attach the Target to the Player Controller! Next ALT drag the Bool that turns the Conversation on and set it to False. Now CTRL drag the NPC Cast Variable and Cast to the NPC. From the Cast’s Blue pin, Call the Custom Leave Event you made. Now CTRL drag the Widget that you created for the Player to press to leave the Conversation, duplicate it, put one by the Event Tick and one in front of the Leave Function. Off of the Event Tick one drag and get the Clicked Bool, attach that to the branch Bool Input. Off of the one by the Call Leave Event drag and Set Clicked Bool to False. Now make a CTRL drag all of the NPC and Character Widget References onto the graph and turn them into a Custom Function. Now do not add the Sequence Node as the picture says, instead select everything from the Set Input to the Custom Function you just made and turn all of that into a Custom Function! Then attach the Output of the new Custom function to the Reset of the DoOnce!
</p><p>Now onto the bottom part of the picture! Go ahead and CTRL drag the 4 Character Widget References and the Array Bool onto the graph! Next, drag off of one of the References and get the Clicked Bool (you only need to do this once), off of the Array Bool get the Get Function and duplicate it as many times as there are options for the player! To set the INTs, start from 0 and add 1 to each next one (The last number should be the Max - 1). Now attach one branch to the first Then of the second Sequence Node, off of that, a DoOnce, and a second branch. Attach the first Branch’s Bool to the Get Clicked Bool, the second to the Get from the Bool Array. Do not attach anything to the Reset of the DoOnce just yet. CTRL drag and get the NPC Cast Variable again and cast to the NPC, attach the to the FALSE pin of the second Branch. Off of that attach the Custom Function you made with all of the Widget References. Then drag off of the Blue pin and get all of the other Custom Events you made in the NPC BP. Select all of the stuff you just made from the Get Clicked Bool to the Custom Function and make all of that in a Custom Function! The only things left should be the Character Widget References, get Array Bool and Get Array Bools and the Custom Events! Now we are done with this picture!
</p>
<h3><span class="mw-headline" id="Picture_20.2F20">Picture 20/20</span></h3>
<p>RefreshWidget! This is the last part of the Tutorial folks! Now lets get started shall we! Before you open the picture, let's finish the last custom Function you made! Open it up and in between the Custom Function and the Purple Box, add a Sequence Node! Then 1 will be hooked up to the Reset for the DoOnce. Off of the True of the second Branch attach the Custom function of everything you made in the top of the Destroy picture, also connects its Output pin to the Sequence. We are now done with the Custom Function so open up the Custom Function before the Sequence Node connected to the Cast Node, also open the RefreshWidget picture!
</p><p>Drag off of one of the Widget References and get the Remove From Parent Function, attach all of the References to this and attach it to the left Purple Box! Now ALT drag both String Variables and Loop Bools you made onto the graph! Connect them to each other and the beginning one to the Remove From Parent. Set the Strings to blank and the Bools to True. Now get the Set Clicked Bool variable from one of the Character References, duplicate it and attach them to the rest of the References! Now ALT drag the Bool Array, drag off of its Input pin and get the Make Array Node, add as many pins as there are Options! Connect the Set Array Bool to the right Purple Box. Now you're done! I hope everything works (I diverged away from the pictures a bit, so some things might not have been explained well) You can use the 2 unused pictures in Hud&amp;Examples as an example for what it should look like (roughly) and how you would set up the Text Lines for the NPC and Character! In the ExampleNPCSetup, the 4th Text Line for the Character (number 0, 3rd /br) has /lv at the end of it, which is why, for the NPC, the 5th (number 4) line is blank, since there is no continuation of the conversation for that option! NPC(0) -&gt; Character(0) -&gt; NPC(1-4) -&gt; Character(1-4) respectively, Character(1) -&gt; NPC(5-8), Character(2) -&gt; NPC(9-12), etc. (That is probably very confusing, you may just want to experiment with it!) --GMC
</p>
<h2><span class="mw-headline" id="Advanced_Sections">Advanced Sections</span></h2>
<p>This is where a sections goes if it does not have a picture(s) yet, so they may be harder to understand!
</p>
<h3 id="DWR"><span class="mw-headline" id="Dynamic_Widget_References">Dynamic Widget References</span></h3>
<p>I have found out how to add the widgets you create to an array instead of their own reference variable! I was doing it correctly up until I tried to remove them from the array! (if you attach a Remove At Index to a For Loop to try to remove them from the array, the ForLoop will not loop correctly, instead you must use the Clear Function to clear the array!
</p><p>So here is what you can change (you don't have to, it still works without doing this!), turn one of your Reference Variable (for the NPC and Character) into an array, then you will use an Add To Array Node to add the Created Widgets to the Array in the 1NPC, 1Character, NPCLoop, and CharacterLoop Nodes! Then in the Destroy Node, instead of 4 Custom Functions connected to each Widget Reference, you only need 1! This is what you have to do: off of the first Sequence Node, create a DoOnce, then a ForEachLoop with the Character Reference Array attached the attach the Custom Function to that with all of the correct pins! Connect the Completed Output to the Reset of the DoOnce. Inside the Custom Function it should now look like this: Branch with the Clicked Variable attached, the a second Branch (delete whatever is in between) with the Bool Array and a Get Array attached, the INT of the Get is attached to the Purple Box INT. Then the 2 Custom Functions attached to the Branch, open the one attached to False. It should look like this: ForEachLoop with the Character Reference Array attached and a Remove From Parent attached to that, attached to the Completed is a Clear Array Node attached to the Character Array, duplicate that and replace the Character Array with the NPC Array, this will be attached to the first Clear, then attached to that would be the 2 Set Strings and Set Loop Bools and Set Bool Array, delete everything else! Now one last thing. Go to the NPC and delete the Custom Events at the bottom, you will only need one, this will also need an INT Input. Connect that to the Custom Function you have in the NPC including the INT pin. Now go back to the Conversation BP and the Custom Function you were just working on, Call the new Custom Event you made in the NPC and attache the INT Input to a + and attach that to the Purple Box INT, also set the + to add 1. Now you're done and it should dynamically add as many Widgets as you need! --GMC<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#top" title="Dynamic NPC Dialogue System Tutorial">To Top</a>
</p>
<h3 id="DLS"><span class="mw-headline" id="Dynamic_Line_Splits">Dynamic Line Splits</span></h3>
<p>I have finished the function to split your lines in half if they get over a character limit, that you can set!  I am still working on the story mode, so be careful of too many Text Boxes!<br />
The first 2 things you need to add are in the NPC BP: 2 public INT variables for the Max#ofTextBoxes and Max#ofCharactersPerLine. Now, in the Conversation BP, in the CheckLine Function, the picture for this is almost correct (the Red Comments), however, these things need to be changed: you will not need the bottom part of the Top Red Comment or the bottom part of the Bottom Red Comment!  Also, in the Top Red Comment, change the &gt;= to just &gt;, and hook the unhooked pin up to the Max#ofCharactersPerLine from the NPC. Now create a Branch an connect its left Execute pin to the left Purple Box and its Bool pin to the &gt;. Now make a new Custom Function and put it inside this function, this will make sure your words do not get cut in half when it splits the lines!<br />
</p><p>Attach the New Function to the True of the Branch, the False will be connected to the right Purple Box, same with the Out Execute pin of the added Function, you will need to add a String Input and 2 Text Output pins. The inside of the Function will look like this: off of the String pin get a LEN then divide by 2, get 2 MID functions and attach the Scource to the String pin, the first MID's Count will be attached to the Div 2, both of the pins for the second MID will be attached to that. Off of the MIDs the first will have the function Ends With, the second Starts With (both of the In pins (In Suffix/Prefix) will have a space), off of those a Select.  The Bool of the Select will be attached to the Ends/Starts with, the False a Local String Variable (you will need 2, one for each Select), the True will be attached to the MID, the ends of the selects will be attached to the right Purple Box's Text pins. Off of the left Purple Box's Execute, set 2 new Local INT variables to 1, then a Branch, True connected to the right Purple Box, False to a Set Local Bool True, connected to a WhileLoop, Body connected to a Branch, True connected to Set Local Bool false and Set first Local String, False connected to Set first Local INT, its pin connected to a +1 connected to the first Local INT. The WhileLoop Bool is connected to the Local Bool, the Branch's Bool to a new Ends With, same Suffix as before, the Source it connected to a MID, its source connected to the Purple Box's String Pin, the Count connected to a -, first pin connected to a div 2 connected to a Len connected to the Purple Box's String, the other pin of the - is connected to the first Local INT. Off of the Completed pin is everything duplicated starting at the first Branch's False, but some things are changed, first Local INT replace with second, replace Ends With to Starts With, replace Set first Local String to second, also the MID's COunt is connected to the div 2, the start to a + connected to the div 2 and second Local INT. Off of the new WhileLoop's Completed is a Branch, True connected to Set second Local String connected to the right Purple Box, False to a new Branch. First Branch Bool connected to first Local INT and second Local INT connected to a &lt; connected to the Branch, the Set second Local String is connected to a MID, Source String to the Purple Box, the Start to - connected to first Local INT and div 2 connected to Len connected to Purple Box, Count connected to + connected to first Local INT and div 2. Off of the second Branch, True connected to the Set second Local String, False to Set first Local String connected to the right Purple Box. The seocnd Branch's Bool is connected to an == connected to the 2 Local INTs, the Set first String is connected to a MID (You know where the rest of the String Inputs go), the COunt is connected to a + connected to second Local INT and div 2 connected to Len. Done!
</p><p>Now in the Create picture, you will need to add 2 more Branches to the NPC section after the CheckLine Function, hook them up to the True and False of the first Branch so that the first Branch is connected to False and the second to True, reconnect the first Branch's Condition pin to the other Bool pin on the CheckLine Function and the other 2 Branches will be connected to the first Bool. Next, you will need to add 4 things to the Input of the 1NPC Node: 2 Execute pins and 2 Text Pins, the first Execute will be connected to the True of the second Branch, the second Execute to the False, this is the same for the first Branch and its corresponding Execute pins. In the Output you will need to add 1 more Execute pin. In the NPCLoop Node you will need to add an Execute pin and a Text pin, connect the other Execute pin on the 1NPC node to this new Execute pin, the Text pin will be connected to the last text pin of the CheckLine Function (Make sure you have removed the extra pins on that!)<br />
</p><p>Ok, now open up the 1NPC node, off of the first new Execute pin, duplicate any of the setups you previously made 3 times, connect 2 of them and that to the Execute, at the end of this add an ALT Loop Count Variable set to 2 and connect that to the right Blue Box's first Execute pin. The Set Conversation pin's will be connected like this: first to the first new Text pin and the second to the second. For the other duplicate, connect it to the second Execute pins of both Blue Boxes. The Set Conversation will be hooked up to the first new Text pin.<br />
Now in the NPCLoop Node off of the new Exectucte pin, duplicate the Set NPC Text and attach it to the execute, its pin will be attached to the new Text pin and the Output to the While Loop. Now set up the branches in this node like the ones in the Create section, but add one more before it with this hook up to the pin: &gt;, top pin is Loop Count, bottom pin is the Max#ofTextBoxes from the NPC. The current stuff you have will be hooked up to the second Branch. The first Branch will look like this: off of the True, duplicate everything off of the first Branch's True (the one with the set loop count +1), set the Set NPC Text pin to Right, Set Conversation Text pin to GLeft, Add to the NPCArray to the Create Widget, and Set Loop Count connected to a +1 connected to Get Loop Count, now add a Branch like the one you added above with the &gt;, off of its False (nothing gets connected to the True) just duplicate everything from the Create Widget to set size, and duplicate the left part of this you just made, without the Set NPC Text. Now on the False of the branch, duplicate everything you just made, but replace the Set NPCText with a Set Loop Bool to false and the last Set Loop count to 1 (not +1). --Gmc
</p>
<h3><span class="mw-headline" id="Story_Mode">Story Mode</span></h3>
<p>You will want to make a button in the NPC Widget Holder in a scale box that is Aligned Full and Middle, the button will be Aligned Full Full, the Visibility set to Collapsed for both and create one Binding for both, in the binding connect a select function to the Visibility, the Wild Card will be a Bool (False Collapsed True Visible), Promote it. Also get the event OnClicked for the Button, put it in the NPCLoop Node. Off of it is: Set NPCLoop Bool True, Set Loop Count 0, the Bool for the new button to False, ForEachLoop with the NPCArrayReferances, off of the body is RemoveFromParent connected to the Blue pin, off of the Complete is a Clear connected to the Array, then connected to the WhileLoop. Off of the WhileLoop put the Set Loop INT +1 here, remove it from the first branch true and the second branch's True, but the second one in the line (the one after the Branch in the line). Off of the first Branch connected to the CheckLine Function, the True will have Set Button Bool to True and Set NPC Loop to False, same with the 3rd Branch off of the 2nd Branch's True, the Trues for the Branches in these sections will be the same. One last thing, you will need to a new Loop Counter for the Character, replace all of the NPCLoop Counts with it in the Character Nodes. --GMC
</p>
<h3><span class="mw-headline" id="Merchant_NPC">Merchant NPC</span></h3>
<p>Note: you can add in regular text options along with the shop options, but put the text options after the shop options or it will mess up!<br />
So, to start us off, there's not much you need to add, but lets start by opening the NPC! We only need 2 things: an Actor Array and a Text Array (This one you won't use till the next Tutorial!) these will both be Public. The actor arrays are where your Merchant Items will go, to add them to the array, you can't just "add" them, unless you make a ton of custom items (I use one master Items and change it in game) if you do it like I do, all you have to do is follow Unreal's Inventory Tutorial <a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Unreal_Motion_Graphics_(UMG)_UI_-_Inventory_Tutorial_Playlist" title="Unreal Motion Graphics (UMG) UI - Inventory Tutorial Playlist">Unreal Motion Graphics (UMG) UI - Inventory Tutorial Playlist</a>! You will also need to add these Arrays to the Conversation Data Array.
</p><p>Now in the Conversation BP, in the Check LV Function, you will want to duplicate the inside 2 times and attach all of them together, the Bool Arrays are different though. For the first one, the modifier will be /mr, you will put this in the Character Text line to indicate you are selling the Item with that designated slot number (option 1, Array item 1), the second shall have /qg for a quest giver, we will use this later as well. Now in the Reset Function, add 2 more branches and set them up like the /lv branch (false connects to the next branch/function) on the True of the /mr branch, it will need to look like this: cast to your Master Item BP by getting the Conversation Data Array and Get from the Merchant Items and connect the INT to the Purple Box and the output to the Cast, then cast to where ever your Inventory is and Add to the Inventory Array and remember to remove the widget from parent and connect the Refresh Inventory Function you made in the Inventory Tutorial! There is one last thing you need to do, connect the Function connected to the True of the /lv to another /mr branch and connect it to the first cast.
</p><p>Next we will add pictures and a System so you can't Infinitely buy an Item (The Merchant will run out)! We will start with the pictures, open up the Character Text Widget, right click the Scale Box and click Wrap With, I used a Horizontal Box, but you can use whatever you want! Now put a new Scale Box in the added Wrap Box, then add an Image to that. If you used a Horizontal Box, I set both of the Scales to Full, but the Image Scale too .5. Next Bind both the Scale and the Image to one binding, this will have a Select with False as Collapsed and True as Visible, the Index will be a Public Bool. (Remember to set the Visibility of both to Collapsed by Default.) Also bind the Brush of the Image to a Bining with the Dark Blue Pin set to a Public Variable. Now go to the Conversation BP in the 1Character Node, take out the Enable Conversation Bool and put it in the CharacterLoop Node in the False Branch Section at the end. Now in the /LV Function, add a Bool Output Pin to it, and inside attach it to the Ends With Output Bool. After all these Functions (1Character and CharacterLoop) add in 2 Branches (Or only 1 if you always want pictures, the second branch will toggle this.) the second will be Attached to True (The Falses will be attached to the Set Text), the first Bool will be connected to the Function Output, the second Bool to a Public Bool in the NPC that you will need to add along with an INT Array. Off of the 2nd Branch's True add a Set image Bool off of the Widget, set it to True, then off of that add a New Custom Function. In the Function add 2 Input Pins, a Character Text and an INT (The INT will be set to 0 for the 1Characters, for the CharacterLoop connect it to the LoopCount INT), inside get the Conversation Data and drag a Get off of the Item Array, attach the INT to the Purple Box, off of that get a Cast to your Master Item, from that Get the Item Info and Make a Slate Brush off of the Item Image, off of the Character Purple Box Pin get a Set Item Image and connect it's pin to the Make Slate Brush. Now a Picture of the Item will show up in the corresponding box! (If the Item Image Bool is set to True in the NPC) Now in the Destroy Node in the Reset Function, add a new Branch on the True's of the MR Branches, connect it's Bool to a&#160;!=, the First pin will be connected to the INT Array you added to the NPC, the other pin is set to 0. Now off of the False of this Branch you can add a Set Conversation Text and set the text to Out Of Stock, so that if you click on the button and the Merchant no longer has any more of that Item, it will say Out Of Stock and won't let you buy it! (The INT Array slots correspond to the Item Array slots)
</p><p>I am working on a Buy/Sell System with multiple pages, however, this may take a while since I am trying to optimize it for a shop with a lot of items (You don't want 10 pages with 4 items each), so I am having to experiment a little which takes longer for me to develop a publishable creation!  <br />
--GMC
</p>
<h3 id="UDS"><span class="mw-headline" id="Updated_Destroy_Section">Updated Destroy Section</span></h3>
<p>This video will help you in the mean time! <a rel="nofollow" class="external free" href="https://www.youtube.com/watch?v=7ox8DakE7No&amp;feature=youtu.be&amp;t=3m30s">https://www.youtube.com/watch?v=7ox8DakE7No&amp;feature=youtu.be&amp;t=3m30s</a>
--GMC<br />
<a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial#top" title="Dynamic NPC Dialogue System Tutorial">To Top</a>
</p>
<!-- 
NewPP limit report
Cached time: 20200401010559
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.044 seconds
Real time usage: 0.051 seconds
Preprocessor visited node count: 150/1000000
Preprocessor generated node count: 212/1000000
Post‐expand include size: 20/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.868      1 -total
100.00%    0.868      1 Template:Rating
-->
</div>
<!-- Saved in parser cache with key wiki_pd05v2:pcache:idhash:450-0!canonical and timestamp 20200401010559 and revision id 901
 -->
</div>						<div class="printfooter">
							Retrieved from "<a dir="ltr" href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&amp;oldid=901">https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Dynamic_NPC_Dialogue_System_Tutorial&amp;oldid=901</a>"						</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Tutorials&amp;action=edit&amp;redlink=1" class="new" title="Category:Tutorials (page does not exist)">Tutorials</a></li><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Community_Created_Content" title="Category:Community Created Content">Community Created Content</a></li><li><a href="https://mediawikiv2-website-prod05.ol.epicgames.net/index.php?title=Category:Blueprint" title="Category:Blueprint">Blueprint</a></li></ul></div></div>					<div class="visualClear"></div>
									</div>
			</div>
		</div>
		<div id="eg-footer" role="contentinfo">
			<!DOCTYPE html><html data-baseurl="https://www.unrealengine.com"><head><meta charSet="UTF-8"><meta httpEquiv="X-UA-Compatible" content="IE=9;IE=10;IE=11;IE=Edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui"><meta name="host" content="ue-website-node-prod07-i-08a23efcd19f60be7"><meta name="worker" content="152"><link rel="apple-touch-icon" sizes="180x180" href="https://mediawikiv2-website-prod05.ol.epicgames.net/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://mediawikiv2-website-prod05.ol.epicgames.net/favicon-16x16.png"><link rel="manifest" href="https://mediawikiv2-website-prod05.ol.epicgames.net/manifest.json"><link rel="mask-icon" href="https://mediawikiv2-website-prod05.ol.epicgames.net/safari-pinned-tab.svg" color="#2a2a2a"><meta name="apple-mobile-web-app-title" content="Unreal Engine"><meta name="application-name" content="Unreal Engine"><meta name="msapplication-TileColor" content="#0aaff1"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta name="theme-color" content="#0aaff1"><title data-react-helmet="true"></title></head><body><div id="epicGamesFooter"></div><script>window._epicGamesFooter = {"serverUrl":"https://www.unrealengine.com","socialLinks":[{"_type":"Epic Footer Social Link","id":"twitter","href":"https://twitter.com/unrealengine"},{"_type":"Epic Footer Social Link","id":"facebook","href":"https://www.facebook.com/UnrealEngine"},{"_type":"Epic Footer Social Link","href":"http://www.twitch.tv/unrealengine","id":"twitch"},{"_type":"Epic Footer Social Link","id":"instagram","href":"http://instagram.com/UnrealEngine"},{"_type":"Epic Footer Social Link","href":"http://www.youtube.com/unrealengine","id":"youtube"},{"_type":"Epic Footer Social Link","href":"https://www.unrealengine.com/rss","id":"rss"}],"_currentVersion":"1.89","copyrights":["© 2004-{YEAR}, Epic Games, Inc. All rights reserved. Unreal and its logo are Epic’s trademarks or registered trademarks in the US and elsewhere."],"newsLetterConfigs":{"enableNewsLetterCMS":true,"titleMsg":"Sign up for Unreal Engine news!","btnTxt":"Subscribe","_type":"Epic Footer News Letter","logo":"https://cdn2.unrealengine.com/Unreal+Engine%2FUE-Logo-988x988-1dee3bc7f6714edf3c21ee71826ebab54ae02077.png","successMsg":"You have successfully subscribed to Unreal Engine Newsletter.","loginRequired":false},"legalTags":[],"_type":"Epic Games Footer","newLineCopyrights":false,"_lastModifiedBy":"tony.rossi","epicPropertyName":"unreal_engine","_createdBy":"tony.rossi","_uuid":"dbad9ee8-9ebd-49e5-a448-e930feda5b65","logos":[{"_type":"Epic Footer Logo","href":"https://www.epicgames.com?lang=en-US","id":"eg","title":"Epic Games"},{"_type":"Epic Footer Logo","id":"ue","href":"https://www.unrealengine.com"}],"callToAction":{"_type":"Epic Header Call To Action","useCustomCallback":false,"title":""},"_futureVersion":"none","_created":"2017-08-21T08:59:33.817Z","messages":{"_type":"Epic Footer Messages","tos":"Terms of Service","privacy":"Privacy Policy"},"links":[{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/features","title":"Features"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/branding","title":"Logo & Branding"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://trello.com/b/TTAVI7Ny/ue4-roadmap","title":"Roadmap"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/education","title":"Education"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/academic-partners-apply","title":"Academic Partners"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/resources","title":"More Resources"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/awards","title":"Awards"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/custom-licensing","title":"Custom License Terms"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://dev.epicgames.com","title":"Online Services"},{"_type":"Epic Footer Link","useCustomCallback":true,"href":"http://unrealengine.com/training-partners","title":"Training Partners"},{"_type":"Epic Footer Link","useCustomCallback":false,"href":"https://www.epicgames.com/site/community-rules","title":"Community Rules"}],"hideDefaultTermsPolicy":false,"_lastModified":"2020-03-20T13:39:17.770Z","_version":{"_comment":"Publish The Common Content Type to server ","_createdBy":"tony.rossi"},"_locale":"en_US","isEu":false,"useServerUrl":true};
window.__locale = '';
</script><link key="footer-css" rel="stylesheet" href="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/footer.epic-unreal-engine.5ace4ab88c6f6357685f.css"><script src="https://static-assets-prod.epicgames.com/unrealengine/static/webpack/footer.epic-unreal-engine.5ace4ab88c6f6357685f.js"></script></body></html>		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.044","walltime":"0.051","ppvisitednodes":{"value":150,"limit":1000000},"ppgeneratednodes":{"value":212,"limit":1000000},"postexpandincludesize":{"value":20,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"timingprofile":["100.00%    0.868      1 -total","100.00%    0.868      1 Template:Rating"]},"cachereport":{"timestamp":"20200401010559","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":93});});</script>
	<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"93a8bd5691","applicationID":"145396307","transactionName":"MlxXbUBZWkJUAkVQCgsWdFpGUVtfGgBSTQwKVxpPW11D","queueTime":0,"applicationTime":133,"atts":"HhtUGwhDSUw=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
